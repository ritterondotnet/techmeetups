)]}'
{"version":3,"sources":["useraccounts:core/lib/utils.js","useraccounts:core/lib/field.js","useraccounts:core/lib/core.js","useraccounts:core/lib/client.js","useraccounts:core/lib/templates_helpers/at_error.js","useraccounts:core/lib/templates_helpers/at_form.js","useraccounts:core/lib/templates_helpers/at_input.js","useraccounts:core/lib/templates_helpers/at_nav_button.js","useraccounts:core/lib/templates_helpers/at_oauth.js","useraccounts:core/lib/templates_helpers/at_pwd_form.js","useraccounts:core/lib/templates_helpers/at_pwd_form_btn.js","useraccounts:core/lib/templates_helpers/at_pwd_link.js","useraccounts:core/lib/templates_helpers/at_reCaptcha.js","useraccounts:core/lib/templates_helpers/at_resend_verification_email_link.js","useraccounts:core/lib/templates_helpers/at_result.js","useraccounts:core/lib/templates_helpers/at_sep.js","useraccounts:core/lib/templates_helpers/at_signin_link.js","useraccounts:core/lib/templates_helpers/at_signup_link.js","useraccounts:core/lib/templates_helpers/at_social.js","useraccounts:core/lib/templates_helpers/at_terms_link.js","useraccounts:core/lib/templates_helpers/at_title.js","useraccounts:core/lib/templates_helpers/at_message.js","useraccounts:core/lib/templates_helpers/ensure_signed_in.html","useraccounts:core/lib/templates_helpers/ensure_signed_in.js","useraccounts:core/lib/methods.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,4B;AACA,oD;AACA,E;;AAEA,0B;AACA,2B;;AAEA,a;AACA,wB;AACA,2B;AACA,mD;AACA,+B;AACA,+C;AACA,oC;AACA,Y;AACA,yB;AACA,K;AACA,G;AACA,E;;;;;;;;;;;;;;;;;;;AClBA,oF;AACA,e;AACA,oF;;AAEA,yB;AACA,0B;AACA,0B;;AAEA,2C;AACA,sC;AACA,E;;AAEA,sB;AACA,4C;AACA,iC;AACA,I;AACA,C;;AAEA,sB;AACA,4C;AACA,gC;AACA,W;AACA,I;AACA,C;;AAEA,4C;AACA,iC;AACA,mB;AACA,G;;AAEA,+B;AACA,iC;AACA,iB;AACA,G;;AAEA,8B;AACA,iC;AACA,iB;AACA,G;;AAEA,iE;AACA,kB;AACA,yB;AACA,G;;AAEA,uB;AACA,gC;AACA,G;;AAEA,uB;AACA,gC;AACA,G;;AAEA,yB;AACA,kC;AACA,G;;AAEA,e;AACA,E;;AAEA,sB;AACA,oD;AACA,uC;;AAEA,oC;AACA,kC;AACA,yC;AACA,iE;AACA,K;;AAEA,uB;AACA,yC;AACA,K;;AAEA,uB;AACA,I;AACA,C;;AAEA,sB;AACA,oD;AACA,uC;;AAEA,kC;AACA,iE;AACA,K;;AAEA,uB;AACA,yC;AACA,K;;AAEA,uB;AACA,I;AACA,C;;AAEA,wC;AACA,2B;AACA,E;;AAEA,sB;AACA,yD;AACA,mC;AACA,gF;AACA,K;;AAEA,gC;AACA,iF;AACA,K;;AAEA,6D;AACA,I;AACA,C;;AAEA,sB;AACA,yC;AACA,wD;AACA,I;AACA,C;;AAEA,sB;AACA,wC;AACA,qD;AACA,kB;AACA,K;;AAEA,mD;AACA,kB;AACA,K;;AAEA,qD;AACA,kB;AACA,K;AACA,I;AACA,C;;AAEA,sB;AACA,2C;AACA,kE;AACA,I;AACA,C;;AAEA,oB;AACA,0C;AACA,8B;AACA,gE;AACA,K;;AAEA,0B;AACA,4D;AACA,K;;AAEA,4B;AACA,8D;AACA,K;AACA,I;;AAEA,sB;AACA,6C;AACA,iC;AACA,I;AACA,C;;AAEA,sB;AACA,4C;AACA,wD;;AAEA,wB;AACA,oC;AACA,K;;AAEA,wC;AACA,I;AACA,C;;AAEA,sB;AACA,4C;AACA,gC;AACA,W;AACA,I;AACA,C;;AAEA,sB;AACA,2C;AACA,kC;AACA,I;AACA,C;;AAEA,sB;AACA,2C;AACA,gC;AACA,W;AACA,I;AACA,C;;AAEA,sB;AACA,mD;AACA,0B;AACA,sC;AACA,I;AACA,C;;AAEA,sB;AACA,mD;AACA,gC;AACA,W;AACA,I;AACA,C;;AAEA,sB;AACA,gE;AACA,mC;AACA,wE;AACA,a;AACA,K;;AAEA,gC;AACA,kF;AACA,a;AACA,K;;AAEA,2D;AACA,I;AACA,C;;AAEA,oD;AACA,wD;AACA,2B;AACA,qB;;AAEA,6C;AACA,mB;AACA,0B;AACA,6D;AACA,kC;;AAEA,qD;AACA,c;AACA,0B;AACA,kC;;AAEA,qB;AACA,O;AACA,Y;AACA,yB;AACA,gC;;AAEA,kB;AACA,K;AACA,G;;AAEA,iC;AACA,iC;AACA,6C;AACA,gF;AACA,8B;;AAEA,wE;AACA,G;;AAEA,iC;AACA,6C;AACA,+E;AACA,8B;;AAEA,uE;AACA,G;;AAEA,wD;AACA,+B;AACA,8B;;AAEA,uB;AACA,G;;AAEA,kB;AACA,kC;AACA,6D;;AAEA,gC;AACA,iB;AACA,K;;AAEA,yB;AACA,8B;;AAEA,e;AACA,G;;AAEA,oB;AACA,4B;;AAEA,e;AACA,E;;;;;;;;;;;;;;;;;;;ACnSA,oF;AACA,mC;AACA,oF;;AAEA,a;AACA,oC;AACA,wC;AACA,oC;AACA,mC;AACA,iC;AACA,iC;AACA,sC;AACA,kD;AACA,E;;AAEA,c;AACA,mD;AACA,8C;AACA,8C;AACA,yC;AACA,yC;AACA,sC;AACA,2C;AACA,2C;AACA,E;;AAEA,Y;AACA,oC;AACA,wC;AACA,qC;AACA,mC;AACA,iC;AACA,4C;AACA,gD;AACA,E;;AAEA,mB;AACA,mC;AACA,qC;AACA,uC;AACA,E;;AAEA,gD;AACA,mB;AACA,uC;AACA,2B;AACA,K;AACA,c;AACA,G;;AAEA,a;AACA,oC;AACA,qC;AACA,iC;AACA,8C;AACA,2C;AACA,4C;AACA,oC;AACA,qC;AACA,wC;AACA,uC;AACA,sC;AACA,uC;AACA,wC;AACA,0D;AACA,2D;AACA,2D;AACA,8B;AACA,0C;AACA,yC;AACA,0C;AACA,0C;AACA,yC;AACA,0C;AACA,oC;AACA,0C;AACA,mD;AACA,uC;AACA,uC;AACA,uC;AACA,qC;AACA,mC;AACA,wC;AACA,uC;AACA,qC;AACA,mC;AACA,E;;AAEA,iD;AACA,c;AACA,c;AACA,2C;AACA,uC;AACA,gD;AACA,oD;AACA,2C;AACA,uD;AACA,6C;AACA,+C;AACA,iD;AACA,qE;;AAEA,e;AACA,wC;AACA,0C;AACA,0C;AACA,iD;AACA,kD;AACA,2D;AACA,sC;AACA,4C;;AAEA,2B;AACA,gD;AACA,4C;AACA,8C;AACA,4C;AACA,8C;AACA,0C;;AAEA,oC;AACA,qC;AACA,mC;;AAEA,c;AACA,wC;AACA,0C;;AAEA,U;AACA,yC;AACA,yC;AACA,0C;;AAEA,mC;;AAEA,oB;AACA,6B;AACA,6D;AACA,sC;AACA,oC;AACA,wD;AACA,K;;AAEA,yC;AACA,E;;;AAGA,iB;AACA,oC;AACA,oC;AACA,wC;AACA,oC;AACA,mC;AACA,iC;AACA,iC;AACA,E;;;AAGA,gB;AACA,a;AACA,c;AACA,e;AACA,oC;AACA,6F;AACA,kE;AACA,6D;AACA,2C;AACA,2C;AACA,6B;AACA,kD;AACA,iC;;AAEA,2B;AACA,gD;AACA,4C;AACA,8C;AACA,8C;AACA,4C;;AAEA,e;AACA,gC;AACA,qC;AACA,qC;AACA,uD;;AAEA,mB;AACA,kC;AACA,mC;AACA,E;;AAEA,gF;AACA,2B;AACA,gF;;AAEA,sB;AACA,sB;AACA,sB;;AAEA,c;AACA,iB;;AAEA,E;;AAEA,qC;;AAEA,E;AACA,+D;AACA,mE;AACA,6D;AACA,kG;AACA,4G;AACA,sG;AACA,sF;AACA,sF;AACA,0E;AACA,uE;AACA,kG;AACA,E;;;AAGA,sB;AACA,4B;AACA,a;AACA,U;AACA,W;AACA,a;AACA,U;AACA,W;AACA,Q;AACA,S;AACA,Q;AACA,E;;AAEA,+B;AACA,wB;AACA,e;AACA,6B;AACA,+B;AACA,gC;AACA,yC;AACA,mB;AACA,yB;;AAEA,c;AACA,wB;AACA,yB;AACA,8B;AACA,wB;AACA,qC;AACA,2B;AACA,4B;AACA,+B;AACA,4B;;AAEA,2B;AACA,gC;AACA,4B;AACA,8B;AACA,8B;AACA,4B;AACA,0B;;AAEA,oC;AACA,wB;AACA,sB;;AAEA,U;AACA,0B;AACA,E;;AAEA,sB;AACA,W;AACA,oC;AACA,qC;AACA,4B;AACA,gC;AACA,4B;AACA,qB;AACA,qB;AACA,gD;AACA,I;AACA,W;AACA,6E;AACA,kE;AACA,wD;AACA,qD;AACA,uD;AACA,uC;AACA,0C;AACA,6F;AACA,I;AACA,sB;AACA,wB;AACA,S;AACA,gC;AACA,wC;AACA,uC;AACA,mC;AACA,2B;AACA,uG;AACA,8I;AACA,I;AACA,e;AACA,0C;AACA,8B;AACA,4B;AACA,I;AACA,6C;AACA,+C;AACA,4B;AACA,kB;AACA,iC;AACA,mB;AACA,kC;AACA,8D;AACA,iD;AACA,uC;AACA,Y;AACA,8C;AACA,4B;AACA,sB;AACA,sC;AACA,4B;AACA,sB;AACA,mB;AACA,+B;AACA,gB;AACA,wC;AACA,I;AACA,yB;AACA,yB;AACA,yB;AACA,qB;AACA,8B;AACA,gC;AACA,kB;AACA,sB;AACA,U;AACA,gC;AACA,mC;AACA,mC;AACA,kC;AACA,qB;AACA,4B;AACA,oB;AACA,iE;AACA,I;AACA,E;;AAEA,+B;AACA,mB;AACA,uB;AACA,E;;AAEA,yB;AACA,wB;AACA,a;AACA,iB;AACA,kB;AACA,mB;AACA,oB;AACA,e;AACA,2B;AACA,uC;AACA,M;AACA,4B;AACA,K;AACA,a;AACA,oB;AACA,qB;AACA,mB;AACA,iB;AACA,kB;AACA,8B;AACA,iC;AACA,gC;AACA,M;AACA,kB;AACA,8B;AACA,iC;AACA,gC;AACA,M;AACA,K;AACA,E;;;AAGA,kC;;AAEA,wB;AACA,kD;AACA,qD;AACA,E;;AAEA,yC;AACA,qD;AACA,4B;AACA,6G;AACA,K;;AAEA,6C;AACA,4B;AACA,yD;AACA,oE;AACA,0E;AACA,K;AACA,2B;AACA,8C;AACA,kD;AACA,K;AACA,kD;AACA,yE;AACA,sE;AACA,K;AACA,kD;AACA,yE;AACA,sE;AACA,K;AACA,6D;AACA,gI;AACA,iF;AACA,K;;AAEA,2E;AACA,0C;AACA,K;;AAEA,wB;AACA,E;;AAEA,2C;AACA,S;;AAEA,wE;AACA,oD;AACA,e;AACA,iF;AACA,G;AACA,W;AACA,mC;AACA,2B;AACA,a;AACA,U;AACA,iF;AACA,G;;AAEA,sB;AACA,E;;AAEA,2C;AACA,gE;AACA,0B;AACA,wF;AACA,G;;AAEA,sC;AACA,4B;AACA,qD;AACA,mD;;AAEA,uC;AACA,mC;AACA,kB;AACA,wC;AACA,iF;AACA,G;;AAEA,8B;AACA,qB;AACA,6B;AACA,sG;;AAEA,qD;;AAEA,uB;AACA,0C;AACA,sE;AACA,K;;AAEA,uB;AACA,0C;AACA,sE;AACA,K;;AAEA,qB;AACA,wC;AACA,gE;AACA,K;;AAEA,2B;AACA,8C;AACA,kF;AACA,K;;AAEA,4B;AACA,+C;AACA,qF;AACA,K;;AAEA,sB;AACA,yC;AACA,mE;AACA,K;AACA,G;AACA,E;;;AAGA,wD;AACA,6I;AACA,E;;;AAGA,2C;AACA,kC;AACA,E;;AAEA,2C;AACA,sD;AACA,iC;AACA,K;;AAEA,qD;AACA,E;;AAEA,qC;AACA,wB;AACA,E;;AAEA,uC;AACA,wC;AACA,E;;AAEA,6C;AACA,e;AACA,E;;AAEA,yC;AACA,yC;AACA,Y;;AAEA,wB;AACA,oE;AACA,U;AACA,0G;AACA,G;AACA,0C;AACA,8B;;AAEA,2C;AACA,+F;AACA,G;;AAEA,yF;AACA,8C;AACA,Y;AACA,iB;AACA,uD;AACA,M;AACA,K;;AAEA,0D;AACA,sD;AACA,8E;;AAEA,0E;AACA,0B;AACA,qD;AACA,gC;AACA,O;AACA,G;;AAEA,2B;AACA,mD;AACA,uB;AACA,K;;AAEA,kB;AACA,E;;AAEA,8C;AACA,qD;AACA,0B;AACA,8G;AACA,G;AACA,8C;AACA,+D;;AAEA,qB;AACA,4C;AACA,8E;AACA,sE;AACA,G;AACA,E;;;;;;;;;;;;;;;;;;;AC/kBA,S;AACA,W;AACA,E;AACA,a;;AAEA,wC;AACA,uB;AACA,iC;AACA,wC;AACA,iC;AACA,8B;AACA,+B;AACA,sB;AACA,sB;AACA,sC;AACA,yD;AACA,E;;AAEA,6B;;AAEA,6D;AACA,+B;;AAEA,mB;AACA,8C;AACA,wC;AACA,E;;AAEA,6E;AACA,yD;AACA,mC;AACA,qC;;AAEA,yE;AACA,+B;;AAEA,sC;AACA,yB;AACA,E;;AAEA,yC;AACA,yB;AACA,E;;AAEA,2B;AACA,oC;AACA,sC;AACA,E;;AAEA,4B;AACA,oC;AACA,2E;AACA,E;;AAEA,4B;AACA,4C;AACA,wB;AACA,gD;AACA,E;;AAEA,2B;AACA,mD;AACA,uB;;AAEA,mC;AACA,wH;AACA,G;;AAEA,sC;AACA,8B;AACA,sB;AACA,G;AACA,+B;;AAEA,+B;AACA,e;AACA,G;AACA,E;;AAEA,sC;AACA,wC;AACA,wB;AACA,K;;AAEA,6B;;AAEA,0B;AACA,2B;AACA,4B;;AAEA,uC;AACA,E;;AAEA,sC;AACA,qC;AACA,E;;AAEA,uC;AACA,sC;AACA,E;;AAEA,wC;AACA,uC;AACA,E;;AAEA,iB;AACA,gC;AACA,yH;AACA,E;;AAEA,iC;AACA,0B;AACA,W;AACA,G;;AAEA,kD;AACA,4C;;AAEA,wC;AACA,2C;AACA,U;AACA,6D;AACA,G;;AAEA,iD;AACA,yD;AACA,4B;AACA,+C;AACA,qB;AACA,kC;AACA,qB;AACA,uC;AACA,uC;AACA,uB;AACA,S;AACA,K;AACA,G;;AAEA,mD;AACA,qC;AACA,qD;AACA,4B;AACA,2C;AACA,wD;;AAEA,sC;AACA,8B;AACA,mC;AACA,sC;AACA,qC;AACA,Q;AACA,8B;AACA,mC;AACA,sC;AACA,qC;AACA,Q;AACA,8B;AACA,K;AACA,U;AACA,0C;AACA,kH;AACA,K;AACA,G;;AAEA,qD;AACA,0B;AACA,0C;AACA,6C;AACA,qB;AACA,gC;AACA,yB;AACA,uC;AACA,uC;AACA,uB;AACA,S;AACA,K;AACA,G;;AAEA,8C;AACA,gE;AACA,mD;AACA,6D;AACA,iE;AACA,4B;AACA,a;AACA,K;;AAEA,iD;AACA,8D;AACA,yB;AACA,a;AACA,K;;AAEA,yD;AACA,0B;AACA,kE;AACA,gE;AACA,wD;AACA,2E;AACA,0E;AACA,K;AACA,I;;AAEA,8C;AACA,iE;AACA,mD;AACA,6D;AACA,iE;AACA,4B;AACA,a;AACA,K;;AAEA,iD;AACA,8D;AACA,yB;AACA,a;AACA,K;;AAEA,yD;AACA,0B;AACA,kE;AACA,gE;AACA,wD;AACA,2E;AACA,sE;AACA,K;AACA,I;;AAEA,8C;AACA,e;AACA,Y;AACA,yB;AACA,e;AACA,qB;AACA,I;AACA,yC;AACA,mD;AACA,gD;AACA,kD;AACA,iD;AACA,+C;;;AAGA,kE;AACA,2E;AACA,2E;AACA,mE;AACA,+E;AACA,uE;AACA,uE;;AAEA,wC;AACA,iB;AACA,uB;AACA,8B;AACA,sC;AACA,c;AACA,mB;AACA,2E;AACA,wD;AACA,uC;AACA,S;AACA,c;AACA,sB;AACA,uF;AACA,c;AACA,4B;AACA,6E;AACA,c;AACA,sB;AACA,mC;AACA,2D;AACA,uC;AACA,S;AACA,c;AACA,gC;AACA,2B;AACA,qE;AACA,uC;AACA,S;AACA,c;AACA,c;AACA,mC;AACA,K;;AAEA,mB;AACA,wD;AACA,8C;AACA,uD;AACA,O;;AAEA,wD;AACA,8C;AACA,uD;AACA,O;;AAEA,8E;AACA,sD;AACA,2D;AACA,O;;AAEA,kF;AACA,kD;AACA,mD;AACA,O;;AAEA,kD;AACA,mD;AACA,O;;AAEA,wE;AACA,wB;AACA,gD;AACA,0C;AACA,+C;AACA,O;;AAEA,wB;AACA,2B;AACA,yC;AACA,6E;AACA,gB;AACA,uB;AACA,8E;AACA,Y;AACA,S;AACA,O;AACA,K;;AAEA,gC;AACA,gC;;AAEA,8B;AACA,8B;AACA,2B;AACA,0B;AACA,4B;AACA,gB;AACA,e;AACA,I;;AAEA,0F;AACA,2C;AACA,iD;AACA,G;;AAEA,2E;AACA,mC;AACA,yB;AACA,2B;AACA,+B;AACA,iC;;AAEA,8C;AACA,8D;AACA,kE;AACA,K;;AAEA,wF;AACA,iE;AACA,qE;AACA,K;;AAEA,2C;AACA,4B;AACA,wB;AACA,+D;AACA,O;;AAEA,8B;AACA,4D;AACA,O;;AAEA,kF;AACA,8G;AACA,qD;AACA,K;;AAEA,yC;AACA,mI;AACA,K;AACA,G;;AAEA,2C;AACA,2B;AACA,E;;AAEA,0C;AACA,qC;AACA,W;AACA,G;;AAEA,oC;;AAEA,kD;AACA,kE;AACA,0C;AACA,O;;AAEA,4B;AACA,2D;AACA,K;AACA,G;AACA,E;;AAEA,kC;AACA,4D;;AAEA,4B;AACA,uB;AACA,qB;AACA,K;AACA,K;AACA,E;;AAEA,iE;AACA,4D;;AAEA,qB;AACA,+B;AACA,G;;AAEA,c;AACA,oC;AACA,+E;AACA,sD;AACA,8D;AACA,S;AACA,Y;AACA,+C;;AAEA,yB;AACA,2B;AACA,O;;AAEA,uD;AACA,sC;AACA,O;;AAEA,uD;AACA,K;;AAEA,yC;AACA,qC;AACA,wE;AACA,yB;AACA,K;AACA,U;AACA,oB;AACA,kB;AACA,K;;AAEA,gB;AACA,2C;AACA,K;AACA,G;AACA,E;;AAEA,6B;;AAEA,iB;AACA,2B;AACA,4B;AACA,G;;;;;;;;;;;;;;;;;;;AC/cA,+B;AACA,6B;AACA,+D;AACA,6C;AACA,M;AACA,uB;AACA,yD;AACA,M;AACA,0B;AACA,uB;AACA,wB;AACA,6D;AACA,yD;AACA,S;AACA,Y;AACA,+D;;AAEA,kF;AACA,uD;AACA,oC;;AAEA,kB;AACA,sC;AACA,mB;AACA,M;AACA,E;;;;;;;;;;;;;;;;;;;ACzBA,8B;AACA,qB;AACA,+D;AACA,gC;AACA,M;AACA,oC;AACA,6E;AACA,kD;AACA,uB;AACA,sD;AACA,M;AACA,4C;AACA,6E;AACA,wD;AACA,yB;AACA,yD;AACA,6B;AACA,yB;AACA,4B;AACA,mE;AACA,oB;AACA,M;AACA,gD;AACA,oE;AACA,6E;AACA,oE;AACA,wG;AACA,M;AACA,qC;AACA,2D;AACA,M;AACA,sC;AACA,4D;AACA,M;AACA,uC;AACA,6D;AACA,M;AACA,uC;AACA,uD;AACA,yB;AACA,6E;AACA,iF;AACA,yB;AACA,oB;AACA,M;AACA,yC;AACA,qD;AACA,yB;AACA,6E;AACA,2F;AACA,wB;AACA,kC;AACA,M;AACA,yC;AACA,sD;AACA,yB;AACA,6E;AACA,6I;AACA,M;AACA,wC;AACA,6F;AACA,0D;AACA,6F;AACA,iF;AACA,mE;AACA,0B;AACA,a;AACA,S;AACA,U;AACA,gC;AACA,wE;AACA,4B;AACA,4B;AACA,S;AACA,U;AACA,qB;AACA,M;AACA,gD;AACA,gD;AACA,qF;AACA,0H;AACA,M;AACA,E;;;;;;;;;;;;;;;;;;;AClFA,2C;AACA,gC;;AAEA,4C;AACA,iF;;AAEA,oD;AACA,gF;AACA,4C;AACA,S;;AAEA,mE;AACA,oD;AACA,O;AACA,G;AACA,G;;AAEA,+B;AACA,0B;AACA,4C;AACA,M;AACA,4B;AACA,oD;AACA,M;AACA,6B;AACA,+C;AACA,qF;AACA,qD;AACA,yD;AACA,M;AACA,6B;AACA,+F;AACA,M;AACA,8B;AACA,0B;AACA,iC;AACA,qC;AACA,qC;AACA,mC;AACA,mC;AACA,kC;AACA,kC;AACA,mC;AACA,mC;AACA,6B;AACA,M;AACA,uB;AACA,0B;AACA,mD;AACA,oC;AACA,4C;AACA,sB;AACA,qB;AACA,W;AACA,M;AACA,2B;AACA,mC;AACA,iD;AACA,M;AACA,6B;AACA,yD;AACA,mD;AACA,yF;AACA,yD;AACA,6D;AACA,S;AACA,M;AACA,E;;AAEA,8B;AACA,wC;AACA,2B;AACA,M;AACA,yC;AACA,+B;AACA,wC;AACA,4C;AACA,2C;AACA,iC;AACA,oC;AACA,S;;AAEA,sC;AACA,6B;AACA,mB;AACA,+C;AACA,qF;AACA,sC;AACA,+B;AACA,mB;AACA,iD;AACA,mD;AACA,wD;AACA,iF;AACA,S;AACA,6B;AACA,M;AACA,sC;AACA,iD;AACA,uC;AACA,mB;AACA,+C;AACA,qF;AACA,sC;AACA,+B;AACA,mB;AACA,+B;AACA,wC;AACA,4C;AACA,2C;AACA,iC;AACA,oC;AACA,S;AACA,iD;AACA,mD;AACA,wD;AACA,iF;AACA,S;AACA,6B;AACA,M;AACA,E;;;;;;;;;;;;;;;;;;;ACxHA,mC;AACA,qB;AACA,2G;AACA,iD;AACA,K;AACA,E;;AAEA,kC;AACA,4C;AACA,+B;AACA,4B;AACA,uC;AACA,Y;AACA,kD;AACA,M;AACA,E;;;;;;;;;;;;;;;;;;;ACfA,+B;AACA,8B;AACA,iD;AACA,M;AACA,E;;;;;;;;;;;;;;;;;;ACJA,iC;AACA,0B;AACA,4C;AACA,M;AACA,wB;AACA,gD;AACA,qF;AACA,oE;AACA,gD;AACA,W;AACA,M;AACA,wC;AACA,gD;AACA,qF;AACA,sF;AACA,M;AACA,+B;AACA,8C;AACA,mF;AACA,2E;AACA,M;AACA,E;;;AAGA,0C;AACA,kD;AACA,E;;AAEA,gC;AACA,kB;AACA,+C;AACA,+B;AACA,8B;;AAEA,4C;;AAEA,gD;AACA,qF;AACA,iD;;AAEA,qC;AACA,kC;AACA,kF;AACA,0B;AACA,8B;AACA,yB;AACA,8D;AACA,+C;AACA,kD;AACA,uB;;AAEA,oC;;AAEA,6C;AACA,iD;AACA,+C;AACA,qC;AACA,yC;AACA,a;AACA,sD;AACA,0C;AACA,a;;AAEA,8E;AACA,8D;AACA,oE;AACA,oC;AACA,iD;AACA,sD;AACA,yB;AACA,uF;AACA,yD;AACA,sC;AACA,0D;AACA,8C;AACA,2B;AACA,qB;AACA,qC;AACA,iB;AACA,oB;AACA,uC;AACA,a;AACA,W;;AAEA,kC;AACA,uC;AACA,wC;AACA,yC;AACA,+B;AACA,uB;AACA,+B;AACA,mE;AACA,iD;AACA,kC;AACA,gF;AACA,mC;AACA,a;AACA,mB;AACA,S;;AAEA,6C;AACA,yD;AACA,mC;AACA,yC;AACA,qD;AACA,yC;AACA,6D;AACA,gE;AACA,yC;AACA,8B;AACA,iC;AACA,uC;AACA,iC;AACA,2C;;AAEA,uD;AACA,iD;AACA,+D;AACA,6E;AACA,iD;AACA,mF;AACA,oB;AACA,gE;AACA,0D;AACA,uE;AACA,wB;AACA,qD;AACA,sC;AACA,oF;AACA,qC;AACA,iB;AACA,uB;AACA,a;AACA,S;;AAEA,kB;AACA,kB;AACA,kB;AACA,iC;AACA,mC;AACA,8B;AACA,8B;AACA,wB;AACA,kE;AACA,qD;AACA,iB;;AAEA,+C;AACA,a;AACA,gC;AACA,kE;AACA,2D;AACA,iB;AACA,qD;AACA,a;AACA,0C;AACA,kE;AACA,+E;AACA,iB;AACA,mD;AACA,a;AACA,gB;AACA,+B;;AAEA,oF;AACA,mC;AACA,2G;AACA,qD;AACA,uB;AACA,a;;;AAGA,sF;AACA,+D;AACA,e;AACA,S;;AAEA,kB;AACA,kB;AACA,kB;AACA,iC;AACA,+C;AACA,0D;AACA,oE;AACA,a;;AAEA,wD;AACA,2B;AACA,mC;AACA,6B;AACA,+B;AACA,kC;AACA,c;;AAEA,4C;AACA,wE;AACA,gC;AACA,+C;AACA,a;;AAEA,8E;AACA,8E;AACA,+H;AACA,oF;AACA,uH;AACA,8D;AACA,kF;AACA,mE;AACA,sE;AACA,2C;;AAEA,yE;;AAEA,8C;AACA,2F;AACA,kD;;AAEA,+B;AACA,iE;AACA,mE;AACA,2B;AACA,qB;AACA,0B;AACA,0C;;AAEA,oC;AACA,8E;AACA,iE;AACA,6B;;AAEA,2D;AACA,yB;AACA,4C;AACA,8E;AACA,uE;AACA,6B;AACA,iE;AACA,yB;AACA,8B;AACA,8E;AACA,2F;AACA,6B;AACA,+D;AACA,yB;;AAEA,2F;AACA,sF;AACA,qE;AACA,+B;AACA,2B;AACA,qB;AACA,mB;AACA,e;AACA,S;;AAEA,0B;AACA,0B;AACA,0B;AACA,mC;AACA,4C;AACA,4B;AACA,gC;AACA,0E;AACA,uG;AACA,mD;AACA,mB;AACA,e;AACA,S;;AAEA,0C;AACA,0C;AACA,0C;AACA,gE;AACA,+D;AACA,iF;AACA,0E;AACA,qC;AACA,6C;AACA,0G;AACA,0C;AACA,wG;AACA,sD;AACA,kE;AACA,gE;AACA,mB;AACA,e;AACA,S;;AAEA,0B;AACA,0B;AACA,0B;AACA,mC;AACA,wF;AACA,0E;AACA,wG;AACA,8D;AACA,sD;AACA,kE;AACA,gE;AACA,mB;AACA,e;AACA,S;;AAEA,0B;AACA,qC;AACA,0B;AACA,iD;AACA,qF;AACA,0E;AACA,mH;AACA,mD;;AAEA,2D;AACA,mB;AACA,e;AACA,S;AACA,M;AACA,E;;;;;;;;;;;;;;;;;;;AC7TA,oC;AACA,+B;AACA,4D;AACA,iC;AACA,gE;AACA,c;AACA,mB;AACA,oB;AACA,S;AACA,oB;AACA,8B;AACA,M;AACA,4B;AACA,gD;AACA,qF;AACA,mF;AACA,M;AACA,E;;;;;;;;;;;;;;;;;;;ACjBA,iC;AACA,0B;AACA,4C;AACA,M;AACA,8B;AACA,2D;AACA,M;AACA,wB;AACA,iF;AACA,M;AACA,yB;AACA,kF;AACA,M;AACA,yB;AACA,kF;AACA,M;AACA,E;;AAEA,gC;AACA,+C;AACA,+B;AACA,iD;AACA,M;AACA,E;;;;;;;;;;;;;;;;;;ACvBA,+C;AACA,qD;AACA,E;;AAEA,mC;AACA,qB;AACA,+F;AACA,+D;AACA,wD;AACA,M;;AAEA,uB;AACA,gG;AACA,M;;AAEA,2B;AACA,oG;AACA,M;AACA,E;;;;;;;;;;;;;;;;;;;AClBA,qD;AACA,2B;AACA,4C;AACA,M;AACA,8C;AACA,yE;AACA,M;AACA,wB;AACA,qG;AACA,M;AACA,yB;AACA,sG;AACA,M;AACA,yB;AACA,sG;AACA,M;AACA,E;;AAEA,oD;AACA,+D;AACA,+B;AACA,+D;AACA,M;AACA,E;;;;;;;;;;;;;;;;;;ACvBA,gC;AACA,wB;AACA,oE;AACA,uB;AACA,4D;AACA,M;AACA,E;;;;;;;;;;;;;;;;;;ACNA,6B;AACA,wB;AACA,yE;AACA,M;AACA,E;;;;;;;;;;;;;;;;;;ACJA,oC;AACA,0B;AACA,4C;AACA,M;AACA,2B;AACA,wD;AACA,M;AACA,wB;AACA,oF;AACA,M;AACA,yB;AACA,qF;AACA,M;AACA,yB;AACA,qF;AACA,M;AACA,E;;AAEA,mC;AACA,4C;AACA,+B;AACA,8C;AACA,M;AACA,E;;;;;;;;;;;;;;;;;;ACvBA,oC;AACA,0B;AACA,4C;AACA,M;AACA,2B;AACA,wD;AACA,M;AACA,wB;AACA,oF;AACA,M;AACA,yB;AACA,qF;AACA,M;AACA,yB;AACA,qF;AACA,M;AACA,E;;AAEA,mC;AACA,4C;AACA,+B;AACA,8C;AACA,M;AACA,E;;;;;;;;;;;;;;;;;;ACvBA,gC;AACA,0B;AACA,yC;AACA,8B;AACA,iC;AACA,kB;AACA,gC;AACA,8B;AACA,iF;AACA,6D;AACA,kC;AACA,S;AACA,M;AACA,qB;AACA,wB;AACA,M;AACA,2B;AACA,+D;AACA,gB;AACA,qC;AACA,kB;AACA,M;AACA,4B;AACA,2B;AACA,mC;AACA,+C;AACA,mC;AACA,8C;AACA,gC;AACA,6G;AACA,4E;AACA,iC;AACA,mC;AACA,0D;AACA,qF;AACA,sC;AACA,uC;AACA,oB;AACA,kH;AACA,kB;AACA,+G;AACA,S;AACA,+C;AACA,qF;AACA,yC;AACA,gF;AACA,+E;AACA,mH;AACA,M;AACA,E;;AAEA,+B;AACA,wC;AACA,+B;AACA,mC;AACA,yC;AACA,mB;AACA,iC;AACA,8D;AACA,iF;AACA,kC;AACA,uB;AACA,iB;AACA,oD;AACA,yE;AACA,yD;AACA,mB;AACA,a;AACA,gB;AACA,gD;AACA,mD;AACA,yF;AACA,uC;AACA,2B;AACA,mD;AACA,+D;AACA,gB;AACA,mE;AACA,sD;AACA,uB;AACA,uE;AACA,c;AACA,8B;AACA,2E;AACA,sG;AACA,iB;AACA,4E;AACA,wG;AACA,iB;AACA,a;AACA,qD;AACA,qD;AACA,yE;AACA,iC;AACA,iB;AACA,kF;AACA,sD;AACA,2F;AACA,iB;AACA,oB;AACA,iE;AACA,e;AACA,S;AACA,M;AACA,E;;;;;;;;;;;;;;;;;;;ACxGA,mC;AACA,0B;AACA,4C;AACA,M;AACA,qB;AACA,mF;AACA,M;AACA,2B;AACA,oD;AACA,M;AACA,gC;AACA,kF;AACA,M;AACA,6B;AACA,8F;AACA,M;AACA,oB;AACA,8E;AACA,M;AACA,yB;AACA,kD;AACA,M;AACA,8B;AACA,gF;AACA,M;AACA,E;;AAEA,kC;AACA,gC;AACA,yC;AACA,mC;AACA,M;AACA,E;;;;;;;;;;;;;;;;;;AChCA,+B;AACA,qB;AACA,4C;AACA,iF;AACA,gF;AACA,I;AACA,E;;;;;;;;;;;;;;;;;;;ACNA,iC;AACA,yB;AACA,sE;AACA,wB;AACA,6D;AACA,M;AACA,E;;;;;;;;;;;;;;;;;;;ACLA,uC;AACA,kF;AACA,kB;AACA,8B;AACA,mD;AACA,iB;AACA,uD;AACA,c;AACA,yD;AACA,Q;AACA,mB;AACA,2C;AACA,kD;AACA,S;AACA,iB;AACA,iB;AACA,4C;AACA,iD;AACA,mB;AACA,2D;AACA,gB;AACA,uD;AACA,U;AACA,qB;AACA,6C;AACA,oD;AACA,W;AACA,qB;AACA,mB;AACA,gG;AACA,iB;AACA,K;AACA,I;;;;;;;;;;;;;;;;;;;;AChCA,iC;AACA,yB;AACA,yB;AACA,oF;AACA,gE;AACA,yD;AACA,S;AACA,mB;AACA,Y;AACA,qC;AACA,kB;AACA,K;AACA,G;AACA,G;;;;;;;;;;;;;;;;;;;ACdA,S;AACA,0B;AACA,E;AACA,a;;AAEA,gB;AACA,0C;AACA,+B;;AAEA,6B;;AAEA,iB;AACA,8C;AACA,2E;AACA,qB;;AAEA,8B;AACA,4F;AACA,O;;AAEA,4C;AACA,mD;AACA,K;AACA,I;AACA,G","file":"/packages/useraccounts_core.js","sourcesContent":["capitalize = function(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n};\n\nsignedInAs =  function() {\n  var user = Meteor.user();\n\n  if (user) {\n    if (user.username) {\n      return user.username;\n    } else if (user.profile && user.profile.name) {\n      return user.profile.name;\n    } else if (user.emails && user.emails[0]) {\n      return user.emails[0].address;\n    } else {\n      return \"Signed In\";\n    }\n  }\n};\n","// ---------------------------------------------------------------------------------\n// Field object\n// ---------------------------------------------------------------------------------\n\nField = function(field) {\n  check(field, FIELD_PAT);\n  _.defaults(this, field);\n\n  this.validating = new ReactiveVar(false);\n  this.status = new ReactiveVar(null);\n};\n\nif (Meteor.isClient) {\n  Field.prototype.clearStatus = function() {\n    return this.status.set(null);\n  };\n}\n\nif (Meteor.isServer) {\n  Field.prototype.clearStatus = function() {\n    // Nothing to do server-side\n    return;\n  };\n}\n\nField.prototype.fixValue = function(value) {\n  if (this.type === \"checkbox\") {\n    return !!value;\n  }\n\n  if (this.type === \"select\") {\n    // TODO: something working...\n    return value;\n  }\n\n  if (this.type === \"radio\") {\n    // TODO: something working...\n    return value;\n  }\n\n  // Possibly applies required transformations to the input value\n  if (this.trim) {\n    value = value.trim();\n  }\n\n  if (this.lowercase) {\n    value = value.toLowerCase();\n  }\n\n  if (this.uppercase) {\n    value = value.toUpperCase();\n  }\n\n  if (!!this.transform) {\n    value = this.transform(value);\n  }\n\n  return value;\n};\n\nif (Meteor.isClient) {\n  Field.prototype.getDisplayName = function(state) {\n    var displayName = this.displayName;\n\n    if (_.isFunction(displayName)) {\n      displayName = displayName();\n    } else if (_.isObject(displayName)) {\n      displayName = displayName[state] || displayName[\"default\"];\n    }\n\n    if (!displayName) {\n      displayName = capitalize(this._id);\n    }\n\n    return displayName;\n  };\n}\n\nif (Meteor.isClient) {\n  Field.prototype.getPlaceholder = function(state) {\n    var placeholder = this.placeholder;\n\n    if (_.isObject(placeholder)) {\n      placeholder = placeholder[state] || placeholder[\"default\"];\n    }\n\n    if (!placeholder) {\n      placeholder = capitalize(this._id);\n    }\n\n    return placeholder;\n  };\n}\n\nField.prototype.getStatus = function() {\n  return this.status.get();\n};\n\nif (Meteor.isClient) {\n  Field.prototype.getValue = function(tempalteInstance) {\n    if (this.type === \"checkbox\") {\n      return !!(tempalteInstance.$(\"#at-field-\" + this._id + \":checked\").val());\n    }\n\n    if (this.type === \"radio\") {\n      return tempalteInstance.$(\"[name=at-field-\"+ this._id + \"]:checked\").val();\n    }\n\n    return tempalteInstance.$(\"#at-field-\" + this._id).val();\n  };\n}\n\nif (Meteor.isClient) {\n  Field.prototype.hasError = function() {\n    return this.negativeValidation && this.status.get();\n  };\n}\n\nif (Meteor.isClient) {\n  Field.prototype.hasIcon = function() {\n    if (this.showValidating && this.isValidating()) {\n      return true;\n    }\n\n    if (this.negativeFeedback && this.hasError()) {\n      return true;\n    }\n\n    if (this.positiveFeedback && this.hasSuccess()) {\n      return true;\n    }\n  };\n}\n\nif (Meteor.isClient) {\n  Field.prototype.hasSuccess = function() {\n    return this.positiveValidation && this.status.get() === false;\n  };\n}\n\nif (Meteor.isClient)\n  Field.prototype.iconClass = function() {\n    if (this.isValidating()) {\n      return AccountsTemplates.texts.inputIcons[\"isValidating\"];\n    }\n\n    if (this.hasError()) {\n      return AccountsTemplates.texts.inputIcons[\"hasError\"];\n    }\n\n    if (this.hasSuccess()) {\n      return AccountsTemplates.texts.inputIcons[\"hasSuccess\"];\n    }\n  };\n\nif (Meteor.isClient) {\n  Field.prototype.isValidating = function() {\n    return this.validating.get();\n  };\n}\n\nif (Meteor.isClient) {\n  Field.prototype.setError = function(err) {\n    check(err, Match.OneOf(String, undefined, Boolean));\n\n    if (err === false) {\n      return this.status.set(false);\n    }\n\n    return this.status.set(err || true);\n  };\n}\n\nif (Meteor.isServer) {\n  Field.prototype.setError = function(err) {\n    // Nothing to do server-side\n    return;\n  };\n}\n\nif (Meteor.isClient) {\n  Field.prototype.setSuccess = function() {\n    return this.status.set(false);\n  };\n}\n\nif (Meteor.isServer) {\n  Field.prototype.setSuccess = function() {\n    // Nothing to do server-side\n    return;\n  };\n}\n\nif (Meteor.isClient) {\n  Field.prototype.setValidating = function(state) {\n    check(state, Boolean);\n    return this.validating.set(state);\n  };\n}\n\nif (Meteor.isServer) {\n  Field.prototype.setValidating = function(state) {\n    // Nothing to do server-side\n    return;\n  };\n}\n\nif (Meteor.isClient) {\n  Field.prototype.setValue = function(tempalteInstance, value) {\n    if (this.type === \"checkbox\") {\n      tempalteInstance.$(\"#at-field-\" + this._id).prop('checked', true);\n      return;\n    }\n\n    if (this.type === \"radio\") {\n      tempalteInstance.$(\"[name=at-field-\"+ this._id + \"]\").prop('checked', true);\n      return;\n    }\n\n    tempalteInstance.$(\"#at-field-\" + this._id).val(value);\n  };\n}\n\nField.prototype.validate = function(value, strict) {\n  check(value, Match.OneOf(undefined, String, Boolean));\n  this.setValidating(true);\n  this.clearStatus();\n\n  if (_.isUndefined(value) || value === '') {\n    if (!!strict) {\n      if (this.required) {\n        this.setError(AccountsTemplates.texts.requiredField);\n        this.setValidating(false);\n\n        return AccountsTemplates.texts.requiredField;\n      } else {\n        this.setSuccess();\n        this.setValidating(false);\n\n        return false;\n      }\n    } else {\n      this.clearStatus();\n      this.setValidating(false);\n\n      return null;\n    }\n  }\n\n  var valueLength = value.length;\n  var minLength = this.minLength;\n  if (minLength && valueLength < minLength) {\n    this.setError(AccountsTemplates.texts.minRequiredLength + \": \" + minLength);\n    this.setValidating(false);\n\n    return AccountsTemplates.texts.minRequiredLength + \": \" + minLength;\n  }\n\n  var maxLength = this.maxLength;\n  if (maxLength && valueLength > maxLength) {\n    this.setError(AccountsTemplates.texts.maxAllowedLength + \": \" + maxLength);\n    this.setValidating(false);\n\n    return AccountsTemplates.texts.maxAllowedLength + \": \" + maxLength;\n  }\n\n  if (this.re && valueLength && !value.match(this.re)) {\n    this.setError(this.errStr);\n    this.setValidating(false);\n\n    return this.errStr;\n  }\n\n  if (this.func) {\n    var result = this.func(value);\n    var err = result === true ? this.errStr || true : result;\n\n    if (_.isUndefined(result)) {\n      return err;\n    }\n\n    this.status.set(err);\n    this.setValidating(false);\n\n    return err;\n  }\n\n  this.setSuccess();\n  this.setValidating(false);\n\n  return false;\n};\n","// ---------------------------------------------------------------------------------\n// Patterns for methods\" parameters\n// ---------------------------------------------------------------------------------\n\nSTATE_PAT = {\n  changePwd: Match.Optional(String),\n  enrollAccount: Match.Optional(String),\n  forgotPwd: Match.Optional(String),\n  resetPwd: Match.Optional(String),\n  signIn: Match.Optional(String),\n  signUp: Match.Optional(String),\n  verifyEmail: Match.Optional(String),\n  resendVerificationEmail: Match.Optional(String),\n};\n\nERRORS_PAT = {\n  accountsCreationDisabled: Match.Optional(String),\n  cannotRemoveService: Match.Optional(String),\n  captchaVerification: Match.Optional(String),\n  loginForbidden: Match.Optional(String),\n  mustBeLoggedIn: Match.Optional(String),\n  pwdMismatch: Match.Optional(String),\n  validationErrors: Match.Optional(String),\n  verifyEmailFirst: Match.Optional(String),\n};\n\nINFO_PAT = {\n  emailSent: Match.Optional(String),\n  emailVerified: Match.Optional(String),\n  pwdChanged: Match.Optional(String),\n  pwdReset: Match.Optional(String),\n  pwdSet: Match.Optional(String),\n  signUpVerifyEmail: Match.Optional(String),\n  verificationEmailSent: Match.Optional(String),\n};\n\nINPUT_ICONS_PAT = {\n  hasError: Match.Optional(String),\n  hasSuccess: Match.Optional(String),\n  isValidating: Match.Optional(String),\n};\n\nObjWithStringValues = Match.Where(function (x) {\n  check(x, Object);\n  _.each(_.values(x), function(value) {\n      check(value, String);\n  });\n  return true;\n});\n\nTEXTS_PAT = {\n  button: Match.Optional(STATE_PAT),\n  errors: Match.Optional(ERRORS_PAT),\n  info: Match.Optional(INFO_PAT),\n  inputIcons: Match.Optional(INPUT_ICONS_PAT),\n  maxAllowedLength: Match.Optional(String),\n  minRequiredLength: Match.Optional(String),\n  navSignIn: Match.Optional(String),\n  navSignOut: Match.Optional(String),\n  optionalField: Match.Optional(String),\n  pwdLink_link: Match.Optional(String),\n  pwdLink_pre: Match.Optional(String),\n  pwdLink_suff: Match.Optional(String),\n  requiredField: Match.Optional(String),\n  resendVerificationEmailLink_pre: Match.Optional(String),\n  resendVerificationEmailLink_link: Match.Optional(String),\n  resendVerificationEmailLink_suff: Match.Optional(String),\n  sep: Match.Optional(String),\n  signInLink_link: Match.Optional(String),\n  signInLink_pre: Match.Optional(String),\n  signInLink_suff: Match.Optional(String),\n  signUpLink_link: Match.Optional(String),\n  signUpLink_pre: Match.Optional(String),\n  signUpLink_suff: Match.Optional(String),\n  socialAdd: Match.Optional(String),\n  socialConfigure: Match.Optional(String),\n  socialIcons: Match.Optional(ObjWithStringValues),\n  socialRemove: Match.Optional(String),\n  socialSignIn: Match.Optional(String),\n  socialSignUp: Match.Optional(String),\n  socialWith: Match.Optional(String),\n  termsAnd: Match.Optional(String),\n  termsPreamble: Match.Optional(String),\n  termsPrivacy: Match.Optional(String),\n  termsTerms: Match.Optional(String),\n  title: Match.Optional(STATE_PAT),\n};\n\n// Configuration pattern to be checked with check\nCONFIG_PAT = {\n  // Behaviour\n  confirmPassword: Match.Optional(Boolean),\n  defaultState: Match.Optional(String),\n  enablePasswordChange: Match.Optional(Boolean),\n  enforceEmailVerification: Match.Optional(Boolean),\n  focusFirstInput: Match.Optional(Boolean),\n  forbidClientAccountCreation: Match.Optional(Boolean),\n  lowercaseUsername: Match.Optional(Boolean),\n  overrideLoginErrors: Match.Optional(Boolean),\n  sendVerificationEmail: Match.Optional(Boolean),\n  socialLoginStyle: Match.Optional(Match.OneOf(\"popup\", \"redirect\")),\n\n  // Appearance\n  defaultLayout: Match.Optional(String),\n  hideSignInLink: Match.Optional(Boolean),\n  hideSignUpLink: Match.Optional(Boolean),\n  showAddRemoveServices: Match.Optional(Boolean),\n  showForgotPasswordLink: Match.Optional(Boolean),\n  showResendVerificationEmailLink: Match.Optional(Boolean),\n  showLabels: Match.Optional(Boolean),\n  showPlaceholders: Match.Optional(Boolean),\n\n  // Client-side Validation\n  continuousValidation: Match.Optional(Boolean),\n  negativeFeedback: Match.Optional(Boolean),\n  negativeValidation: Match.Optional(Boolean),\n  positiveFeedback: Match.Optional(Boolean),\n  positiveValidation: Match.Optional(Boolean),\n  showValidating: Match.Optional(Boolean),\n\n  // Privacy Policy and Terms of Use\n  privacyUrl: Match.Optional(String),\n  termsUrl: Match.Optional(String),\n\n  // Redirects\n  homeRoutePath: Match.Optional(String),\n  redirectTimeout: Match.Optional(Number),\n\n  // Hooks\n  onLogoutHook: Match.Optional(Function),\n  onSubmitHook: Match.Optional(Function),\n  preSignUpHook: Match.Optional(Function),\n\n  texts: Match.Optional(TEXTS_PAT),\n\n  //reCaptcha config\n  reCaptcha: Match.Optional({\n    data_type: Match.Optional(Match.OneOf(\"audio\", \"image\")),\n    secretKey: Match.Optional(String),\n    siteKey: Match.Optional(String),\n    theme: Match.Optional(Match.OneOf(\"dark\", \"light\")),\n  }),\n\n  showReCaptcha: Match.Optional(Boolean),\n};\n\n\nFIELD_SUB_PAT = {\n  \"default\": Match.Optional(String),\n  changePwd: Match.Optional(String),\n  enrollAccount: Match.Optional(String),\n  forgotPwd: Match.Optional(String),\n  resetPwd: Match.Optional(String),\n  signIn: Match.Optional(String),\n  signUp: Match.Optional(String),\n};\n\n\n// Field pattern\nFIELD_PAT = {\n  _id: String,\n  type: String,\n  required: Match.Optional(Boolean),\n  displayName: Match.Optional(Match.OneOf(String, Match.Where(_.isFunction), FIELD_SUB_PAT)),\n  placeholder: Match.Optional(Match.OneOf(String, FIELD_SUB_PAT)),\n  select: Match.Optional([{text: String, value: Match.Any}]),\n  minLength: Match.Optional(Match.Integer),\n  maxLength: Match.Optional(Match.Integer),\n  re: Match.Optional(RegExp),\n  func: Match.Optional(Match.Where(_.isFunction)),\n  errStr: Match.Optional(String),\n\n  // Client-side Validation\n  continuousValidation: Match.Optional(Boolean),\n  negativeFeedback: Match.Optional(Boolean),\n  negativeValidation: Match.Optional(Boolean),\n  positiveValidation: Match.Optional(Boolean),\n  positiveFeedback: Match.Optional(Boolean),\n\n  // Transforms\n  trim: Match.Optional(Boolean),\n  lowercase: Match.Optional(Boolean),\n  uppercase: Match.Optional(Boolean),\n  transform: Match.Optional(Match.Where(_.isFunction)),\n\n  // Custom options\n  options: Match.Optional(Object),\n  template: Match.Optional(String),\n};\n\n// -----------------------------------------------------------------------------\n// AccountsTemplates object\n// -----------------------------------------------------------------------------\n\n// -------------------\n// Client/Server stuff\n// -------------------\n\n// Constructor\nAT = function() {\n\n};\n\nAT.prototype.CONFIG_PAT = CONFIG_PAT;\n\n/*\n  Each field object is represented by the following properties:\n    _id:         String   (required)  // A unique field\"s id / name\n    type:        String   (required)  // Displayed input type\n    required:    Boolean  (optional)  // Specifies Whether to fail or not when field is left empty\n    displayName: String   (optional)  // The field\"s name to be displayed as a label above the input element\n    placeholder: String   (optional)  // The placeholder text to be displayed inside the input element\n    minLength:   Integer  (optional)  // Possibly specifies the minimum allowed length\n    maxLength:   Integer  (optional)  // Possibly specifies the maximum allowed length\n    re:          RegExp   (optional)  // Regular expression for validation\n    func:        Function (optional)  // Custom function for validation\n    errStr:      String   (optional)  // Error message to be displayed in case re validation fails\n*/\n\n\n// Allowed input types\nAT.prototype.INPUT_TYPES = [\n  \"checkbox\",\n  \"email\",\n  \"hidden\",\n  \"password\",\n  \"radio\",\n  \"select\",\n  \"tel\",\n  \"text\",\n  \"url\",\n];\n\n// Current configuration values\nAT.prototype.options = {\n  // Appearance\n  //defaultLayout: undefined,\n  showAddRemoveServices: false,\n  showForgotPasswordLink: false,\n  showResendVerificationEmailLink: false,\n  showLabels: true,\n  showPlaceholders: true,\n\n  // Behaviour\n  confirmPassword: true,\n  defaultState: \"signIn\",\n  enablePasswordChange: false,\n  focusFirstInput: true,\n  forbidClientAccountCreation: false,\n  lowercaseUsername: false,\n  overrideLoginErrors: true,\n  sendVerificationEmail: false,\n  socialLoginStyle: \"popup\",\n\n  // Client-side Validation\n  //continuousValidation: false,\n  //negativeFeedback: false,\n  //negativeValidation: false,\n  //positiveValidation: false,\n  //positiveFeedback: false,\n  //showValidating: false,\n\n  // Privacy Policy and Terms of Use\n  privacyUrl: undefined,\n  termsUrl: undefined,\n\n  // Hooks\n  onSubmitHook: undefined,\n};\n\nAT.prototype.texts = {\n  button: {\n    changePwd: \"updateYourPassword\",\n    //enrollAccount: \"createAccount\",\n    enrollAccount: \"signUp\",\n    forgotPwd: \"emailResetLink\",\n    resetPwd: \"setPassword\",\n    signIn: \"signIn\",\n    signUp: \"signUp\",\n    resendVerificationEmail: \"Send email again\",\n  },\n  errors: {\n    accountsCreationDisabled: \"Client side accounts creation is disabled!!!\",\n    cannotRemoveService: \"Cannot remove the only active service!\",\n    captchaVerification: \"Captcha verification failed!\",\n    loginForbidden: \"error.accounts.Login forbidden\",\n    mustBeLoggedIn: \"error.accounts.Must be logged in\",\n    pwdMismatch: \"error.pwdsDontMatch\",\n    validationErrors: \"Validation Errors\",\n    verifyEmailFirst: \"Please verify your email first. Check the email and follow the link!\",\n  },\n  navSignIn: 'signIn',\n  navSignOut: 'signOut',\n  info: {\n    emailSent: \"info.emailSent\",\n    emailVerified: \"info.emailVerified\",\n    pwdChanged: \"info.passwordChanged\",\n    pwdReset: \"info.passwordReset\",\n    pwdSet: \"Password Set\",\n    signUpVerifyEmail: \"Successful Registration! Please check your email and follow the instructions.\",\n    verificationEmailSent: \"A new email has been sent to you. If the email doesn't show up in your inbox, be sure to check your spam folder.\",\n  },\n  inputIcons: {\n    isValidating: \"fa fa-spinner fa-spin\",\n    hasSuccess: \"fa fa-check\",\n    hasError: \"fa fa-times\",\n  },\n  maxAllowedLength: \"Maximum allowed length\",\n  minRequiredLength: \"Minimum required length\",\n  optionalField: \"optional\",\n  pwdLink_pre: \"\",\n  pwdLink_link: \"forgotPassword\",\n  pwdLink_suff: \"\",\n  requiredField: \"Required Field\",\n  resendVerificationEmailLink_pre: \"Verification email lost?\",\n  resendVerificationEmailLink_link: \"Send again\",\n  resendVerificationEmailLink_suff: \"\",\n  sep: \"OR\",\n  signInLink_pre: \"ifYouAlreadyHaveAnAccount\",\n  signInLink_link: \"signin\",\n  signInLink_suff: \"\",\n  signUpLink_pre: \"dontHaveAnAccount\",\n  signUpLink_link: \"signUp\",\n  signUpLink_suff: \"\",\n  socialAdd: \"add\",\n  socialConfigure: \"configure\",\n  socialIcons: {\n      \"meteor-developer\": \"fa fa-rocket\"\n  },\n  socialRemove: \"remove\",\n  socialSignIn: \"signIn\",\n  socialSignUp: \"signUp\",\n  socialWith: \"with\",\n  termsPreamble: \"clickAgree\",\n  termsPrivacy: \"privacyPolicy\",\n  termsAnd: \"and\",\n  termsTerms: \"terms\",\n  title: {\n    changePwd: \"changePassword\",\n    enrollAccount: \"createAccount\",\n    forgotPwd: \"resetYourPassword\",\n    resetPwd: \"resetYourPassword\",\n    signIn: \"signIn\",\n    signUp: \"createAccount\",\n    verifyEmail: \"\",\n    resendVerificationEmail: \"Send the verification email again\",\n  },\n};\n\nAT.prototype.SPECIAL_FIELDS = [\n  \"password_again\",\n  \"username_and_email\",\n];\n\n// SignIn / SignUp fields\nAT.prototype._fields = [\n  new Field({\n    _id: \"email\",\n    type: \"email\",\n    required: true,\n    lowercase: true,\n    trim: true,\n    func: function(email) {\n        return !_.contains(email, '@');\n    },\n    errStr: 'Invalid email',\n  }),\n  new Field({\n    _id: \"password\",\n    type: \"password\",\n    required: true,\n    minLength: 6,\n    displayName: {\n        \"default\": \"password\",\n        changePwd: \"newPassword\",\n        resetPwd: \"newPassword\",\n    },\n    placeholder: {\n        \"default\": \"password\",\n        changePwd: \"newPassword\",\n        resetPwd: \"newPassword\",\n    },\n  }),\n];\n\n\nAT.prototype._initialized = false;\n\n// Input type validation\nAT.prototype._isValidInputType = function(value) {\n    return _.indexOf(this.INPUT_TYPES, value) !== -1;\n};\n\nAT.prototype.addField = function(field) {\n    // Fields can be added only before initialization\n    if (this._initialized) {\n      throw new Error(\"AccountsTemplates.addField should strictly be called before AccountsTemplates.init!\");\n    }\n\n    field = _.pick(field, _.keys(FIELD_PAT));\n    check(field, FIELD_PAT);\n    // Checks there\"s currently no field called field._id\n    if (_.indexOf(_.pluck(this._fields, \"_id\"), field._id) !== -1) {\n      throw new Error(\"A field called \" + field._id + \" already exists!\");\n    }\n    // Validates field.type\n    if (!this._isValidInputType(field.type)) {\n      throw new Error(\"field.type is not valid!\");\n    }\n    // Checks field.minLength is strictly positive\n    if (typeof field.minLength !== \"undefined\" && field.minLength <= 0) {\n      throw new Error(\"field.minLength should be greater than zero!\");\n    }\n    // Checks field.maxLength is strictly positive\n    if (typeof field.maxLength !== \"undefined\" && field.maxLength <= 0) {\n      throw new Error(\"field.maxLength should be greater than zero!\");\n    }\n    // Checks field.maxLength is greater than field.minLength\n    if (typeof field.minLength !== \"undefined\" && typeof field.minLength !== \"undefined\" && field.maxLength < field.minLength) {\n      throw new Error(\"field.maxLength should be greater than field.maxLength!\");\n    }\n\n    if (!(Meteor.isServer && _.contains(this.SPECIAL_FIELDS, field._id))) {\n      this._fields.push(new Field(field));\n    }\n\n    return this._fields;\n};\n\nAT.prototype.addFields = function(fields) {\n  var ok;\n\n  try { // don\"t bother with `typeof` - just access `length` and `catch`\n    ok = fields.length > 0 && \"0\" in Object(fields);\n  } catch (e) {\n    throw new Error(\"field argument should be an array of valid field objects!\");\n  }\n  if (ok) {\n    _.map(fields, function(field) {\n      this.addField(field);\n    }, this);\n  } else {\n    throw new Error(\"field argument should be an array of valid field objects!\");\n  }\n\n  return this._fields;\n};\n\nAT.prototype.configure = function(config) {\n  // Configuration options can be set only before initialization\n  if (this._initialized) {\n    throw new Error(\"Configuration options must be set before AccountsTemplates.init!\");\n  }\n\n  // Updates the current configuration\n  check(config, CONFIG_PAT);\n  var options = _.omit(config, \"texts\", \"reCaptcha\");\n  this.options = _.defaults(options, this.options);\n\n  // Possibly sets up reCaptcha options\n  var reCaptcha = config.reCaptcha;\n  if (reCaptcha) {\n    // Updates the current button object\n    this.options.reCaptcha = _.defaults(reCaptcha, this.options.reCaptcha || {});\n  }\n\n  // Possibly sets up texts...\n  if (config.texts) {\n    var texts = config.texts;\n    var simpleTexts = _.omit(texts, \"button\", \"errors\", \"info\", \"inputIcons\", \"socialIcons\", \"title\");\n\n    this.texts = _.defaults(simpleTexts, this.texts);\n\n    if (texts.button) {\n      // Updates the current button object\n      this.texts.button = _.defaults(texts.button, this.texts.button);\n    }\n\n    if (texts.errors) {\n      // Updates the current errors object\n      this.texts.errors = _.defaults(texts.errors, this.texts.errors);\n    }\n\n    if (texts.info) {\n      // Updates the current info object\n      this.texts.info = _.defaults(texts.info, this.texts.info);\n    }\n\n    if (texts.inputIcons) {\n      // Updates the current inputIcons object\n      this.texts.inputIcons = _.defaults(texts.inputIcons, this.texts.inputIcons);\n    }\n\n    if (texts.socialIcons) {\n      // Updates the current socialIcons object\n      this.texts.socialIcons = _.defaults(texts.socialIcons, this.texts.socialIcons);\n    }\n\n    if (texts.title) {\n      // Updates the current title object\n      this.texts.title = _.defaults(texts.title, this.texts.title);\n    }\n  }\n};\n\n\nAT.prototype.configureRoute = function(route, options) {\n  console.warn('You now need a routing package like useraccounts:iron-routing or useraccounts:flow-routing to be able to configure routes!');\n};\n\n\nAT.prototype.hasField = function(fieldId) {\n  return !!this.getField(fieldId);\n};\n\nAT.prototype.getField = function(fieldId) {\n  var field = _.filter(this._fields, function(field) {\n    return field._id === fieldId;\n  });\n\n  return (field.length === 1) ? field[0] : undefined;\n};\n\nAT.prototype.getFields = function() {\n    return this._fields;\n};\n\nAT.prototype.getFieldIds = function() {\n    return _.pluck(this._fields, \"_id\");\n};\n\nAT.prototype.getRoutePath = function(route) {\n    return \"#\";\n};\n\nAT.prototype.oauthServices = function() {\n  // Extracts names of available services\n  var names;\n\n  if (Meteor.isServer) {\n    names = (Accounts.oauth && Accounts.oauth.serviceNames()) || [];\n  } else {\n    names = (Accounts.oauth && Accounts.loginServicesConfigured() && Accounts.oauth.serviceNames()) || [];\n  }\n  // Extracts names of configured services\n  var configuredServices = [];\n\n  if (Accounts.loginServiceConfiguration) {\n    configuredServices = _.pluck(Accounts.loginServiceConfiguration.find().fetch(), \"service\");\n  }\n\n  // Builds a list of objects containing service name as _id and its configuration status\n  var services = _.map(names, function(name) {\n    return {\n      _id : name,\n      configured: _.contains(configuredServices, name),\n    };\n  });\n\n  // Checks whether there is a UI to configure services...\n  // XXX: this only works with the accounts-ui package\n  var showUnconfigured = typeof Accounts._loginButtonsSession !== \"undefined\";\n\n  // Filters out unconfigured services in case they\"re not to be displayed\n  if (!showUnconfigured) {\n    services = _.filter(services, function(service) {\n      return service.configured;\n    });\n  }\n\n  // Sorts services by name\n  services = _.sortBy(services, function(service) {\n    return service._id;\n  });\n\n  return services;\n};\n\nAT.prototype.removeField = function(fieldId) {\n  // Fields can be removed only before initialization\n  if (this._initialized) {\n    throw new Error(\"AccountsTemplates.removeField should strictly be called before AccountsTemplates.init!\");\n  }\n  // Tries to look up the field with given _id\n  var index = _.indexOf(_.pluck(this._fields, \"_id\"), fieldId);\n\n  if (index !== -1) {\n    return this._fields.splice(index, 1)[0];\n  } else if (!(Meteor.isServer && _.contains(this.SPECIAL_FIELDS, fieldId))) {\n    throw new Error(\"A field called \" + fieldId + \" does not exist!\");\n  }\n};\n","/* global\n  AT: false\n*/\n\"use strict\";\n\n// Allowed Internal (client-side) States\nAT.prototype.STATES = [\n  \"changePwd\", // Change Password\n  \"enrollAccount\", // Account Enrollment\n  \"forgotPwd\", // Forgot Password\n  \"hide\", // Nothing displayed\n  \"resetPwd\", // Reset Password\n  \"signIn\", // Sign In\n  \"signUp\", // Sign Up\n  \"verifyEmail\", // Email verification\n  \"resendVerificationEmail\", // Resend verification email\n];\n\nAT.prototype._loginType = \"\";\n\n// Flag telling whether the whole form should appear disabled\nAT.prototype._disabled = false;\n\n// State validation\nAT.prototype._isValidState = function(value) {\n  return _.contains(this.STATES, value);\n};\n\n// Flags used to avoid clearing errors and redirecting to previous route when\n// signing in/up as a results of a call to ensureSignedIn\nAT.prototype.avoidRedirect = false;\nAT.prototype.avoidClearError = false;\n\n// Token to be provided for routes like reset-password and enroll-account\nAT.prototype.paramToken = null;\n\nAT.prototype.loginType = function () {\n  return this._loginType;\n};\n\nAT.prototype.getparamToken = function() {\n  return this.paramToken;\n};\n\n// Getter for current state\nAT.prototype.getState = function() {\n  return this.state.form.get(\"state\");\n};\n\n// Getter for disabled state\nAT.prototype.disabled = function() {\n  return this.state.form.equals(\"disabled\", true) ? \"disabled\" : undefined;\n};\n\n// Setter for disabled state\nAT.prototype.setDisabled = function(value) {\n  check(value, Boolean);\n  return this.state.form.set(\"disabled\", value);\n};\n\n// Setter for current state\nAT.prototype.setState = function(state, callback) {\n  check(state, String);\n\n  if (!this._isValidState(state)) {\n    throw new Meteor.Error(500, \"Internal server error\", \"accounts-templates-core package got an invalid state value!\");\n  }\n\n  this.state.form.set(\"state\", state);\n  if (!this.avoidClearError) {\n    this.clearState();\n  }\n  this.avoidClearError = false;\n\n  if (_.isFunction(callback)) {\n    callback();\n  }\n};\n\nAT.prototype.clearState = function() {\n  _.each(this._fields, function(field) {\n    field.clearStatus();\n  });\n\n  var form = this.state.form;\n\n  form.set(\"error\", null);\n  form.set(\"result\", null);\n  form.set(\"message\", null);\n\n  AccountsTemplates.setDisabled(false);\n};\n\nAT.prototype.clearError = function() {\n  this.state.form.set(\"error\", null);\n};\n\nAT.prototype.clearResult = function() {\n  this.state.form.set(\"result\", null);\n};\n\nAT.prototype.clearMessage = function() {\n  this.state.form.set(\"message\", null);\n};\n\n// Initialization\nAT.prototype.init = function() {\n  console.warn(\"[AccountsTemplates] There is no more need to call AccountsTemplates.init()! Simply remove the call ;-)\");\n};\n\nAT.prototype._init = function() {\n  if (this._initialized) {\n    return;\n  }\n\n  var usernamePresent = this.hasField(\"username\");\n  var emailPresent = this.hasField(\"email\");\n\n  if (usernamePresent && emailPresent) {\n    this._loginType = \"username_and_email\";\n  } else {\n    this._loginType = usernamePresent ? \"username\" : \"email\";\n  }\n\n  if (this._loginType === \"username_and_email\") {\n    // Possibly adds the field username_and_email in case\n    // it was not configured\n    if (!this.hasField(\"username_and_email\")) {\n      this.addField({\n        _id: \"username_and_email\",\n        type: \"text\",\n        displayName: \"usernameOrEmail\",\n        placeholder: \"usernameOrEmail\",\n        required: true,\n      });\n    }\n  }\n\n  // Only in case password confirmation is required\n  if (this.options.confirmPassword) {\n    // Possibly adds the field password_again in case\n    // it was not configured\n    if (!this.hasField(\"password_again\")) {\n      var pwdAgain = _.clone(this.getField(\"password\"));\n\n      pwdAgain._id = \"password_again\";\n      pwdAgain.displayName = {\n        \"default\": \"passwordAgain\",\n        changePwd: \"newPasswordAgain\",\n        resetPwd: \"newPasswordAgain\",\n      };\n      pwdAgain.placeholder = {\n        \"default\": \"passwordAgain\",\n        changePwd: \"newPasswordAgain\",\n        resetPwd: \"newPasswordAgain\",\n      };\n      this.addField(pwdAgain);\n    }\n  } else {\n    if (this.hasField(\"password_again\")) {\n      throw new Error(\"AccountsTemplates: a field password_again was added but confirmPassword is set to false!\");\n    }\n  }\n\n  // Possibly adds the field current_password in case\n  // it was not configured\n  if (this.options.enablePasswordChange) {\n    if (!this.hasField(\"current_password\")) {\n      this.addField({\n        _id: \"current_password\",\n        type: \"password\",\n        displayName: \"currentPassword\",\n        placeholder: \"currentPassword\",\n        required: true,\n      });\n    }\n  }\n\n  // Ensuser the right order of special fields\n  var moveFieldAfter = function(fieldName, referenceFieldName) {\n    var fieldIds = AccountsTemplates.getFieldIds();\n    var refFieldId = _.indexOf(fieldIds, referenceFieldName);\n    // In case the reference field is not present, just return...\n    if (refFieldId === -1) {\n      return;\n    }\n\n    var fieldId = _.indexOf(fieldIds, fieldName);\n    // In case the sought field is not present, just return...\n    if (fieldId === -1) {\n      return;\n    }\n\n    if (fieldId !== -1 && fieldId !== (refFieldId + 1)) {\n      // removes the field\n      var field = AccountsTemplates._fields.splice(fieldId, 1)[0];\n      // push the field right after the reference field position\n      var newFieldIds = AccountsTemplates.getFieldIds();\n      var newReferenceFieldId = _.indexOf(newFieldIds, referenceFieldName);\n      AccountsTemplates._fields.splice(newReferenceFieldId + 1, 0, field);\n    }\n  };\n\n  // Ensuser the right order of special fields\n  var moveFieldBefore = function(fieldName, referenceFieldName) {\n    var fieldIds = AccountsTemplates.getFieldIds();\n    var refFieldId = _.indexOf(fieldIds, referenceFieldName);\n    // In case the reference field is not present, just return...\n    if (refFieldId === -1) {\n      return;\n    }\n\n    var fieldId = _.indexOf(fieldIds, fieldName);\n    // In case the sought field is not present, just return...\n    if (fieldId === -1) {\n      return;\n    }\n\n    if (fieldId !== -1 && fieldId !== (refFieldId - 1)) {\n      // removes the field\n      var field = AccountsTemplates._fields.splice(fieldId, 1)[0];\n      // push the field right after the reference field position\n      var newFieldIds = AccountsTemplates.getFieldIds();\n      var newReferenceFieldId = _.indexOf(newFieldIds, referenceFieldName);\n      AccountsTemplates._fields.splice(newReferenceFieldId, 0, field);\n    }\n  };\n\n  // The final order should be something like:\n  // - username\n  // - email\n  // - username_and_email\n  // - password\n  // - password_again\n  //\n  // ...so lets do it in reverse order...\n  moveFieldAfter(\"username_and_email\", \"username\");\n  moveFieldAfter(\"username_and_email\", \"email\");\n  moveFieldBefore(\"current_password\", \"password\");\n  moveFieldAfter(\"password\", \"current_password\");\n  moveFieldAfter(\"password_again\", \"password\");\n\n\n  // Sets visibility condition and validation flags for each field\n  var gPositiveValidation = !!AccountsTemplates.options.positiveValidation;\n  var gNegativeValidation = !!AccountsTemplates.options.negativeValidation;\n  var gShowValidating = !!AccountsTemplates.options.showValidating;\n  var gContinuousValidation = !!AccountsTemplates.options.continuousValidation;\n  var gNegativeFeedback = !!AccountsTemplates.options.negativeFeedback;\n  var gPositiveFeedback = !!AccountsTemplates.options.positiveFeedback;\n\n  _.each(this._fields, function(field) {\n    // Visibility\n    switch(field._id) {\n      case \"current_password\":\n        field.visible = [\"changePwd\"];\n        break;\n      case \"email\":\n        field.visible = [\"forgotPwd\", \"signUp\", \"resendVerificationEmail\"];\n        if (AccountsTemplates.loginType() === \"email\") {\n          field.visible.push(\"signIn\");\n        }\n        break;\n      case \"password\":\n        field.visible = [\"changePwd\", \"enrollAccount\", \"resetPwd\", \"signIn\", \"signUp\"];\n        break;\n      case \"password_again\":\n        field.visible = [\"changePwd\", \"enrollAccount\", \"resetPwd\", \"signUp\"];\n        break;\n      case \"username\":\n        field.visible = [\"signUp\"];\n        if (AccountsTemplates.loginType() === \"username\") {\n          field.visible.push(\"signIn\");\n        }\n        break;\n      case \"username_and_email\":\n        field.visible = [];\n        if (AccountsTemplates.loginType() === \"username_and_email\") {\n          field.visible.push(\"signIn\");\n        }\n        break;\n      default:\n        field.visible = [\"signUp\"];\n    }\n\n      // Validation\n      var positiveValidation = field.positiveValidation;\n      if (_.isUndefined(positiveValidation)) {\n        field.positiveValidation = gPositiveValidation;\n      }\n\n      var negativeValidation = field.negativeValidation;\n      if (_.isUndefined(negativeValidation)) {\n        field.negativeValidation = gNegativeValidation;\n      }\n\n      field.validation = field.positiveValidation || field.negativeValidation;\n      if (_.isUndefined(field.continuousValidation)) {\n        field.continuousValidation = gContinuousValidation;\n      }\n\n      field.continuousValidation = field.validation && field.continuousValidation;\n      if (_.isUndefined(field.negativeFeedback)) {\n        field.negativeFeedback = gNegativeFeedback;\n      }\n\n      if (_.isUndefined(field.positiveFeedback)) {\n        field.positiveFeedback = gPositiveFeedback;\n      }\n\n      field.feedback = field.negativeFeedback || field.positiveFeedback;\n      // Validating icon\n      var showValidating = field.showValidating;\n      if (_.isUndefined(showValidating)) {\n        field.showValidating = gShowValidating;\n      }\n\n      // Custom Template\n      if (field.template) {\n        if (field.template in Template) {\n          Template[field.template].helpers(AccountsTemplates.atInputHelpers);\n        } else {\n          console.warn(\n            \"[UserAccounts] Warning no template \" + field.template + \" found!\"\n          );\n        }\n      }\n  });\n\n  // Initializes reactive states\n  var form = new ReactiveDict();\n\n  form.set(\"disabled\", false);\n  form.set(\"state\", \"signIn\");\n  form.set(\"result\", null);\n  form.set(\"error\", null);\n  form.set(\"message\", null);\n  this.state = {\n    form: form,\n  };\n\n  // Possibly subscribes to extended user data (to get the list of registered services...)\n  if (this.options.showAddRemoveServices) {\n      Meteor.subscribe(\"userRegisteredServices\");\n  }\n\n  //Check that reCaptcha site keys are available and no secret keys visible\n  if (this.options.showReCaptcha) {\n    var atSiteKey = null;\n    var atSecretKey = null;\n    var settingsSiteKey = null;\n    var settingsSecretKey = null;\n\n    if (AccountsTemplates.options.reCaptcha) {\n      atSiteKey = AccountsTemplates.options.reCaptcha.siteKey;\n      atSecretKey = AccountsTemplates.options.reCaptcha.secretKey;\n    }\n\n    if (Meteor.settings && Meteor.settings.public && Meteor.settings.public.reCaptcha) {\n      settingsSiteKey = Meteor.settings.public.reCaptcha.siteKey;\n      settingsSecretKey = Meteor.settings.public.reCaptcha.secretKey;\n    }\n\n    if (atSecretKey || settingsSecretKey) {\n      //erase the secret key\n      if (atSecretKey) {\n          AccountsTemplates.options.reCaptcha.secretKey = null;\n      }\n\n      if (settingsSecretKey) {\n          Meteor.settings.public.reCaptcha.secretKey = null;\n      }\n\n      var loc = atSecretKey ? \"User Accounts configuration!\" : \"Meteor settings!\";\n      throw new Meteor.Error(401, \"User Accounts: DANGER - reCaptcha private key leaked to client from \" + loc\n      + \" Provide the key in server settings ONLY.\");\n    }\n\n    if (!atSiteKey && !settingsSiteKey) {\n      throw new Meteor.Error(401, \"User Accounts: reCaptcha site key not found! Please provide it or set showReCaptcha to false.\");\n    }\n  }\n\n  // Marks AccountsTemplates as initialized\n  this._initialized = true;\n};\n\nAT.prototype.linkClick = function(route) {\n  if (AccountsTemplates.disabled()) {\n    return;\n  }\n\n  AccountsTemplates.setState(route);\n\n  if (AccountsTemplates.options.focusFirstInput) {\n    var firstVisibleInput = _.find(this.getFields(), function(f) {\n      return _.contains(f.visible, route);\n    });\n\n    if (firstVisibleInput) {\n      $(\"input#at-field-\" + firstVisibleInput._id).focus();\n    }\n  }\n};\n\nAT.prototype.logout = function() {\n  var onLogoutHook = AccountsTemplates.options.onLogoutHook;\n\n  Meteor.logout(function() {\n    if (onLogoutHook) {\n      onLogoutHook();\n    }\n  });\n};\n\nAT.prototype.submitCallback = function(error, state, onSuccess) {\n  var onSubmitHook = AccountsTemplates.options.onSubmitHook;\n\n  if (onSubmitHook) {\n    onSubmitHook(error, state);\n  }\n\n  if (error) {\n    if (_.isObject(error.details)) {\n      // If error.details is an object, we may try to set fields errors from it\n      _.each(error.details, function(error, fieldId) {\n          AccountsTemplates.getField(fieldId).setError(error);\n      });\n    } else {\n      var err = \"error.accounts.Unknown error\";\n\n      if (error.reason) {\n        err = error.reason;\n      }\n\n      if (err.substring(0, 15) !== \"error.accounts.\") {\n        err = \"error.accounts.\" + err;\n      }\n\n      AccountsTemplates.state.form.set(\"error\", [err]);\n    }\n\n    AccountsTemplates.setDisabled(false);\n    // Possibly resets reCaptcha form\n    if (state === \"signUp\" && AccountsTemplates.options.showReCaptcha) {\n      grecaptcha.reset();\n    }\n  } else {\n    if (onSuccess) {\n      onSuccess();\n    }\n\n    if (state) {\n      AccountsTemplates.setDisabled(false);\n    }\n  }\n};\n\nAccountsTemplates = new AT();\n\n// Initialization\nMeteor.startup(function() {\n  AccountsTemplates._init();\n});\n","AT.prototype.atErrorHelpers = {\n    singleError: function() {\n        var errors = AccountsTemplates.state.form.get(\"error\");\n        return errors && errors.length === 1;\n    },\n    error: function() {\n        return AccountsTemplates.state.form.get(\"error\");\n    },\n    errorText: function(){\n        var field, err;\n        if (this.field){\n            field = T9n.get(this.field, markIfMissing=false);\n            err = T9n.get(this.err, markIfMissing=false);\n        }\n        else\n            err = T9n.get(this.valueOf(), markIfMissing=false);\n\n        // Possibly removes initial prefix in case the key in not found inside t9n\n        if (err.substring(0, 15) === \"error.accounts.\")\n            err = err.substring(15);\n\n        if (field)\n            return field + \": \" + err;\n        return err;\n    },\n};\n","AT.prototype.atFormHelpers = {\n    hide: function(){\n        var state = this.state || AccountsTemplates.getState();\n        return state === \"hide\";\n    },\n    showTitle: function(next_state){\n        var state = next_state || this.state || AccountsTemplates.getState();\n        if (Meteor.userId() && state === \"signIn\")\n          return false;\n        return !!AccountsTemplates.texts.title[state];\n    },\n    showOauthServices: function(next_state){\n        var state = next_state || this.state || AccountsTemplates.getState();\n        if (!(state === \"signIn\" || state === \"signUp\"))\n            return false;\n        var services = AccountsTemplates.oauthServices();\n        if (!services.length)\n            return false;\n        if (Meteor.userId())\n            return AccountsTemplates.options.showAddRemoveServices;\n        return true;\n    },\n    showServicesSeparator: function(next_state){\n        var pwdService = Package[\"accounts-password\"] !== undefined;\n        var state = next_state || this.state || AccountsTemplates.getState();\n        var rightState = (state === \"signIn\" || state === \"signUp\");\n        return rightState && !Meteor.userId() && pwdService && AccountsTemplates.oauthServices().length;\n    },\n    showError: function(next_state) {\n        return !!AccountsTemplates.state.form.get(\"error\");\n    },\n    showResult: function(next_state) {\n        return !!AccountsTemplates.state.form.get(\"result\");\n    },\n    showMessage: function(next_state) {\n        return !!AccountsTemplates.state.form.get(\"message\");\n    },\n    showPwdForm: function(next_state) {\n        if (Package[\"accounts-password\"] === undefined)\n            return false;\n        var state = next_state || this.state || AccountsTemplates.getState();\n        if ((state === \"verifyEmail\") || (state === \"signIn\" && Meteor.userId()))\n            return false;\n        return true;\n    },\n    showSignInLink: function(next_state){\n        if (AccountsTemplates.options.hideSignInLink)\n            return false;\n        var state = next_state || this.state || AccountsTemplates.getState();\n        if (AccountsTemplates.options.forbidClientAccountCreation && state === \"forgotPwd\")\n            return true;\n        return state === \"signUp\";\n    },\n    showSignUpLink: function(next_state){\n        if  (AccountsTemplates.options.hideSignUpLink)\n            return false;\n        var state = next_state || this.state || AccountsTemplates.getState();\n        return ((state === \"signIn\" && !Meteor.userId()) || state === \"forgotPwd\") && !AccountsTemplates.options.forbidClientAccountCreation;\n    },\n    showTermsLink: function(next_state){\n        //TODO: Add privacyRoute and termsRoute as alternatives (the point of named routes is\n        // being able to change the url in one place only)\n        if (!!AccountsTemplates.options.privacyUrl || !!AccountsTemplates.options.termsUrl) {\n            var state = next_state || this.state || AccountsTemplates.getState();\n            if (state === \"signUp\" || state === \"enrollAccount\" ) {\n              return true;\n            }\n        }\n        /*\n        if (state === \"signIn\"){\n            var pwdService = Package[\"accounts-password\"] !== undefined;\n            if (!pwdService)\n                return true;\n        }\n        */\n        return false;\n    },\n    showResendVerificationEmailLink: function(){\n        var parentData = Template.currentData();\n        var state = (parentData && parentData.state) || AccountsTemplates.getState();\n        return (state === \"signIn\" || state === \"forgotPwd\") && AccountsTemplates.options.showResendVerificationEmailLink;\n    },\n};\n","AT.prototype.atInputRendered = [function(){\n    var fieldId = this.data._id;\n\n    var parentData = Template.currentData();\n    var state = (parentData && parentData.state) || AccountsTemplates.getState();\n\n    if (AccountsTemplates.options.focusFirstInput) {\n      var firstVisibleInput = _.find(AccountsTemplates.getFields(), function(f){\n        return _.contains(f.visible, state);\n      });\n\n      if (firstVisibleInput && firstVisibleInput._id === fieldId) {\n        this.$(\"input#at-field-\" + fieldId).focus();\n      }\n  }\n}];\n\nAT.prototype.atInputHelpers = {\n    disabled: function() {\n        return AccountsTemplates.disabled();\n    },\n    showLabels: function() {\n        return AccountsTemplates.options.showLabels;\n    },\n    displayName: function() {\n        var parentData = Template.parentData();\n        var state = (parentData && parentData.state) || AccountsTemplates.getState();\n        var displayName = this.getDisplayName(state);\n        return T9n.get(displayName, markIfMissing=false);\n    },\n    optionalText: function(){\n        return \"(\" + T9n.get(AccountsTemplates.texts.optionalField, markIfMissing=false) + \")\";\n    },\n    templateName: function() {\n        if (this.template)\n            return this.template;\n        if (this.type === \"checkbox\")\n            return \"atCheckboxInput\";\n        if (this.type === \"select\")\n            return \"atSelectInput\";\n        if (this.type === \"radio\")\n            return \"atRadioInput\";\n        if (this.type === \"hidden\")\n            return \"atHiddenInput\";\n        return \"atTextInput\";\n    },\n    values: function(){\n        var id = this._id;\n        return _.map(this.select, function(select){\n            var s = _.clone(select);\n            s._id = id + \"-\" + select.value;\n            s.id = id;\n            return s;\n        });\n    },\n    errorText: function() {\n        var err = this.getStatus();\n        return T9n.get(err, markIfMissing=false);\n    },\n    placeholder: function() {\n        if (AccountsTemplates.options.showPlaceholders) {\n            var parentData = Template.parentData();\n            var state = (parentData && parentData.state) || AccountsTemplates.getState();\n            var placeholder = this.getPlaceholder(state);\n            return T9n.get(placeholder, markIfMissing=false);\n        }\n    },\n};\n\nAT.prototype.atInputEvents = {\n    \"focusin input\": function(event, t){\n        this.clearStatus();\n    },\n    \"focusout input\": function(event, t){\n        var fieldId = this._id;\n        var rawValue = this.getValue(t);\n        var value = this.fixValue(rawValue);\n        // Possibly updates the input value\n        if (value !== rawValue) {\n            this.setValue(t, value);\n        }\n\n        // Client-side only validation\n        if (!this.validation)\n            return;\n        var parentData = Template.parentData();\n        var state = (parentData && parentData.state) || AccountsTemplates.getState();\n        // No validation during signIn\n        if (state === \"signIn\")\n            return;\n        // Special case for password confirmation\n        if (value && fieldId === \"password_again\"){\n            if (value !== $(\"#at-field-password\").val())\n                return this.setError(AccountsTemplates.texts.errors.pwdMismatch);\n        }\n        this.validate(value);\n    },\n    \"keyup input\": function(event, t){\n        // Client-side only continuous validation\n        if (!this.continuousValidation)\n            return;\n        var parentData = Template.parentData();\n        var state = (parentData && parentData.state) || AccountsTemplates.getState();\n        // No validation during signIn\n        if (state === \"signIn\")\n            return;\n        var fieldId = this._id;\n        var rawValue = this.getValue(t);\n        var value = this.fixValue(rawValue);\n        // Possibly updates the input value\n        if (value !== rawValue) {\n            this.setValue(t, value);\n        }\n        // Special case for password confirmation\n        if (value && fieldId === \"password_again\"){\n            if (value !== $(\"#at-field-password\").val())\n                return this.setError(AccountsTemplates.texts.errors.pwdMismatch);\n        }\n        this.validate(value);\n    },\n};\n","AT.prototype.atNavButtonHelpers = {\n    text: function(){\n        var key = Meteor.userId() ? AccountsTemplates.texts.navSignOut : AccountsTemplates.texts.navSignIn;\n        return T9n.get(key, markIfMissing=false);\n    }\n};\n\nAT.prototype.atNavButtonEvents = {\n    'click #at-nav-button': function(event){\n        event.preventDefault();\n        if (Meteor.userId())\n            AccountsTemplates.logout();\n        else\n            AccountsTemplates.linkClick(\"signIn\");\n    },\n};\n","AT.prototype.atOauthHelpers = {\n    oauthService: function() {\n        return AccountsTemplates.oauthServices();\n    },\n};","AT.prototype.atPwdFormHelpers = {\n    disabled: function() {\n        return AccountsTemplates.disabled();\n    },\n    fields: function() {\n        var parentData = Template.currentData();\n        var state = (parentData && parentData.state) || AccountsTemplates.getState();\n        return _.filter(AccountsTemplates.getFields(), function(s) {\n            return _.contains(s.visible, state);\n        });\n    },\n    showForgotPasswordLink: function() {\n        var parentData = Template.currentData();\n        var state = (parentData && parentData.state) || AccountsTemplates.getState();\n        return state === \"signIn\" && AccountsTemplates.options.showForgotPasswordLink;\n    },\n    showReCaptcha: function() {\n      var parentData = Template.currentData();\n      var state = (parentData && parentData.state) || AccountsTemplates.getState();\n      return state === \"signUp\" && AccountsTemplates.options.showReCaptcha;\n    },\n};\n\n\nvar toLowercaseUsername = function(value){\n  return value.toLowerCase().replace(/\\s+/gm, '');\n};\n\nAT.prototype.atPwdFormEvents = {\n    // Form submit\n    \"submit #at-pwd-form\": function(event, t) {\n        event.preventDefault();\n        t.$(\"#at-btn\").blur();\n\n        AccountsTemplates.setDisabled(true);\n\n        var parentData = Template.currentData();\n        var state = (parentData && parentData.state) || AccountsTemplates.getState();\n        var preValidation = (state !== \"signIn\");\n\n        // Client-side pre-validation\n        // Validates fields values\n        // NOTE: This is the only place where password validation can be enforced!\n        var formData = {};\n        var someError = false;\n        var errList = [];\n        _.each(AccountsTemplates.getFields(), function(field){\n            // Considers only visible fields...\n            if (!_.contains(field.visible, state))\n                return;\n\n            var fieldId = field._id;\n\n            var rawValue = field.getValue(t);\n            var value = field.fixValue(rawValue);\n            // Possibly updates the input value\n            if (value !== rawValue) {\n                field.setValue(t, value);\n            }\n            if (value !== undefined && value !== \"\") {\n                formData[fieldId] = value;\n            }\n\n            // Validates the field value only if current state is not \"signIn\"\n            if (preValidation && field.getStatus() !== false){\n                var validationErr = field.validate(value, \"strict\");\n                if (validationErr) {\n                    if (field.negativeValidation)\n                        field.setError(validationErr);\n                    else{\n                        var fId = T9n.get(field.getDisplayName(), markIfMissing=false);\n                        //errList.push(fId + \": \" + err);\n                        errList.push({\n                            field: field.getDisplayName(),\n                            err: validationErr\n                        });\n                    }\n                    someError = true;\n                }\n                else\n                    field.setSuccess();\n            }\n        });\n\n        // Clears error and result\n        AccountsTemplates.clearError();\n        AccountsTemplates.clearResult();\n        AccountsTemplates.clearMessage();\n        // Possibly sets errors\n        if (someError){\n            if (errList.length)\n                AccountsTemplates.state.form.set(\"error\", errList);\n            AccountsTemplates.setDisabled(false);\n            //reset reCaptcha form\n            if (state === \"signUp\" && AccountsTemplates.options.showReCaptcha) {\n                grecaptcha.reset();\n            }\n            return;\n        }\n\n        // Extracts username, email, and pwds\n        var current_password = formData.current_password;\n        var email = formData.email;\n        var password = formData.password;\n        var password_again = formData.password_again;\n        var username = formData.username;\n        var username_and_email = formData.username_and_email;\n        // Clears profile data removing username, email, and pwd\n        delete formData.current_password;\n        delete formData.email;\n        delete formData.password;\n        delete formData.password_again;\n        delete formData.username;\n        delete formData.username_and_email;\n\n        if (AccountsTemplates.options.confirmPassword){\n            // Checks passwords for correct match\n            if (password_again && password !== password_again){\n                var pwd_again = AccountsTemplates.getField(\"password_again\");\n                if (pwd_again.negativeValidation)\n                    pwd_again.setError(AccountsTemplates.texts.errors.pwdMismatch);\n                else\n                    AccountsTemplates.state.form.set(\"error\", [{\n                        field: pwd_again.getDisplayName(),\n                        err: AccountsTemplates.texts.errors.pwdMismatch\n                    }]);\n                AccountsTemplates.setDisabled(false);\n                //reset reCaptcha form\n                if (state === \"signUp\" && AccountsTemplates.options.showReCaptcha) {\n                  grecaptcha.reset();\n                }\n                return;\n            }\n        }\n\n        // -------\n        // Sign In\n        // -------\n        if (state === \"signIn\") {\n            var pwdOk = !!password;\n            var userOk = true;\n            var loginSelector;\n            if (email) {\n                if (AccountsTemplates.options.lowercaseUsername) {\n                  email = toLowercaseUsername(email);\n                }\n\n                loginSelector = {email: email};\n            }\n            else if (username) {\n                if (AccountsTemplates.options.lowercaseUsername) {\n                  username = toLowercaseUsername(username);\n                }\n                loginSelector = {username: username};\n            }\n            else if (username_and_email) {\n                if (AccountsTemplates.options.lowercaseUsername) {\n                  username_and_email = toLowercaseUsername(username_and_email);\n                }\n                loginSelector = username_and_email;\n            }\n            else\n                userOk = false;\n\n            // Possibly exits if not both 'password' and 'username' are non-empty...\n            if (!pwdOk || !userOk){\n                AccountsTemplates.state.form.set(\"error\", [AccountsTemplates.texts.errors.loginForbidden]);\n                AccountsTemplates.setDisabled(false);\n                return;\n            }\n\n\n            return Meteor.loginWithPassword(loginSelector, password, function(error) {\n                AccountsTemplates.submitCallback(error, state);\n            });\n        }\n\n        // -------\n        // Sign Up\n        // -------\n        if (state === \"signUp\") {\n            // Possibly gets reCaptcha response\n            if (AccountsTemplates.options.showReCaptcha) {\n              formData.reCaptchaResponse = grecaptcha.getResponse();\n            }\n\n            var hash = Accounts._hashPassword(password);\n            var options = {\n                username: username,\n                email: email,\n                password: hash,\n                profile: formData,\n            };\n\n            // Call preSignUpHook, if any...\n            var preSignUpHook = AccountsTemplates.options.preSignUpHook;\n            if (preSignUpHook) {\n              preSignUpHook(password, options);\n            }\n\n            return Meteor.call(\"ATCreateUserServer\", options, function(error){\n                AccountsTemplates.submitCallback(error, undefined, function(){\n                    if (AccountsTemplates.options.sendVerificationEmail && AccountsTemplates.options.enforceEmailVerification){\n                        AccountsTemplates.submitCallback(error, state, function () {\n                            AccountsTemplates.state.form.set(\"result\", AccountsTemplates.texts.info.signUpVerifyEmail);\n                            // Cleans up input fields' content\n                            _.each(AccountsTemplates.getFields(), function(field){\n                                // Considers only visible fields...\n                                if (!_.contains(field.visible, state))\n                                    return;\n\n                                var elem = t.$(\"#at-field-\" + field._id);\n\n                                // Nave reset\n                                if (field.type === \"checkbox\") elem.prop('checked', false);\n                                else elem.val(\"\");\n\n                            });\n                            AccountsTemplates.setDisabled(false);\n                            AccountsTemplates.avoidRedirect = true;\n                        });\n                    }\n                    else {\n                        var loginSelector;\n\n                        if (email) {\n                            if (AccountsTemplates.options.lowercaseUsername) {\n                              email = toLowercaseUsername(email);\n                            }\n\n                            loginSelector = {email: email};\n                        }\n                        else if (username) {\n                            if (AccountsTemplates.options.lowercaseUsername) {\n                              username = toLowercaseUsername(username);\n                            }\n                            loginSelector = {username: username};\n                        }\n                        else {\n                            if (AccountsTemplates.options.lowercaseUsername) {\n                              username_and_email = toLowercaseUsername(username_and_email);\n                            }\n                            loginSelector = username_and_email;\n                        }\n\n                        Meteor.loginWithPassword(loginSelector, password, function(error) {\n                            AccountsTemplates.submitCallback(error, state, function(){\n                                AccountsTemplates.setState(\"signIn\");\n                            });\n                        });\n                    }\n                });\n            });\n        }\n\n        //----------------\n        // Forgot Password\n        //----------------\n        if (state === \"forgotPwd\"){\n            return Accounts.forgotPassword({\n                email: email\n            }, function(error) {\n                AccountsTemplates.submitCallback(error, state, function(){\n                    AccountsTemplates.state.form.set(\"result\", AccountsTemplates.texts.info.emailSent);\n                    t.$(\"#at-field-email\").val(\"\");\n                });\n            });\n        }\n\n        //--------------------------------\n        // Reset Password / Enroll Account\n        //--------------------------------\n        if (state === \"resetPwd\" || state === \"enrollAccount\") {\n            var paramToken = AccountsTemplates.getparamToken();\n            return Accounts.resetPassword(paramToken, password, function(error) {\n                AccountsTemplates.submitCallback(error, state, function(){\n                    var pwd_field_id;\n                    if (state === \"resetPwd\")\n                        AccountsTemplates.state.form.set(\"result\", AccountsTemplates.texts.info.pwdReset);\n                    else // Enroll Account\n                        AccountsTemplates.state.form.set(\"result\", AccountsTemplates.texts.info.pwdSet);\n                    t.$(\"#at-field-password\").val(\"\");\n                    if (AccountsTemplates.options.confirmPassword)\n                        t.$(\"#at-field-password_again\").val(\"\");\n                });\n            });\n        }\n\n        //----------------\n        // Change Password\n        //----------------\n        if (state === \"changePwd\"){\n            return Accounts.changePassword(current_password, password, function(error) {\n                AccountsTemplates.submitCallback(error, state, function(){\n                    AccountsTemplates.state.form.set(\"result\", AccountsTemplates.texts.info.pwdChanged);\n                    t.$(\"#at-field-current_password\").val(\"\");\n                    t.$(\"#at-field-password\").val(\"\");\n                    if (AccountsTemplates.options.confirmPassword)\n                        t.$(\"#at-field-password_again\").val(\"\");\n                });\n            });\n        }\n\n        //----------------\n        // Resend Verification E-mail\n        //----------------\n        if (state === \"resendVerificationEmail\"){\n            return Meteor.call(\"ATResendVerificationEmail\", email, function (error) {\n                AccountsTemplates.submitCallback(error, state, function(){\n                    AccountsTemplates.state.form.set(\"result\", AccountsTemplates.texts.info.verificationEmailSent);\n                    t.$(\"#at-field-email\").val(\"\");\n\n                    AccountsTemplates.avoidRedirect = true;\n                });\n            });\n        }\n    },\n};\n","AT.prototype.atPwdFormBtnHelpers = {\n    submitDisabled: function(){\n        var disable = _.chain(AccountsTemplates.getFields())\n            .map(function(field){\n                return field.hasError() || field.isValidating();\n            })\n            .some()\n            .value()\n        ;\n        if (disable)\n            return \"disabled\";\n    },\n    buttonText: function() {\n        var parentData = Template.currentData();\n        var state = (parentData && parentData.state) || AccountsTemplates.getState();\n        return T9n.get(AccountsTemplates.texts.button[state], markIfMissing=false);\n    },\n};\n","AT.prototype.atPwdLinkHelpers = {\n    disabled: function() {\n        return AccountsTemplates.disabled();\n    },\n    forgotPwdLink: function(){\n        return AccountsTemplates.getRoutePath(\"forgotPwd\");\n    },\n    preText: function(){\n        return T9n.get(AccountsTemplates.texts.pwdLink_pre, markIfMissing=false);\n    },\n    linkText: function(){\n        return T9n.get(AccountsTemplates.texts.pwdLink_link, markIfMissing=false);\n    },\n    suffText: function(){\n        return T9n.get(AccountsTemplates.texts.pwdLink_suff, markIfMissing=false);\n    },\n};\n\nAT.prototype.atPwdLinkEvents = {\n    \"click #at-forgotPwd\": function(event, t) {\n        event.preventDefault();\n        AccountsTemplates.linkClick(\"forgotPwd\");\n    },\n};","AT.prototype.atReCaptchaRendered = function() {\n    $.getScript('//www.google.com/recaptcha/api.js');\n};\n\nAT.prototype.atReCaptchaHelpers = {\n    key: function() {\n        if (AccountsTemplates.options.reCaptcha && AccountsTemplates.options.reCaptcha.siteKey)\n            return AccountsTemplates.options.reCaptcha.siteKey;\n        return Meteor.settings.public.reCaptcha.siteKey;\n    },\n\n    theme: function() {\n        return AccountsTemplates.options.reCaptcha && AccountsTemplates.options.reCaptcha.theme;\n    },\n\n    data_type: function() {\n        return AccountsTemplates.options.reCaptcha && AccountsTemplates.options.reCaptcha.data_type;\n    },\n};\n","AT.prototype.atResendVerificationEmailLinkHelpers = {\n    disabled: function () {\n        return AccountsTemplates.disabled();\n    },\n    resendVerificationEmailLink: function () {\n        return AccountsTemplates.getRoutePath(\"resendVerificationEmail\");\n    },\n    preText: function(){\n        return T9n.get(AccountsTemplates.texts.resendVerificationEmailLink_pre, markIfMissing=false);\n    },\n    linkText: function(){\n        return T9n.get(AccountsTemplates.texts.resendVerificationEmailLink_link, markIfMissing=false);\n    },\n    suffText: function(){\n        return T9n.get(AccountsTemplates.texts.resendVerificationEmailLink_suff, markIfMissing=false);\n    },\n};\n\nAT.prototype.atResendVerificationEmailLinkEvents = {\n    \"click #at-resend-verification-email\": function(event, t) {\n        event.preventDefault();\n        AccountsTemplates.linkClick('resendVerificationEmail');\n    },\n};","AT.prototype.atResultHelpers = {\n    result: function() {\n        var resultText = AccountsTemplates.state.form.get(\"result\");\n        if (resultText)\n            return T9n.get(resultText, markIfMissing=false);\n    },\n};","AT.prototype.atSepHelpers = {\n    sepText: function(){\n        return T9n.get(AccountsTemplates.texts.sep, markIfMissing=false);\n    },\n};","AT.prototype.atSigninLinkHelpers = {\n    disabled: function() {\n        return AccountsTemplates.disabled();\n    },\n    signInLink: function(){\n        return AccountsTemplates.getRoutePath(\"signIn\");\n    },\n    preText: function(){\n        return T9n.get(AccountsTemplates.texts.signInLink_pre, markIfMissing=false);\n    },\n    linkText: function(){\n        return T9n.get(AccountsTemplates.texts.signInLink_link, markIfMissing=false);\n    },\n    suffText: function(){\n        return T9n.get(AccountsTemplates.texts.signInLink_suff, markIfMissing=false);\n    },\n};\n\nAT.prototype.atSigninLinkEvents = {\n    \"click #at-signIn\": function(event, t) {\n        event.preventDefault();\n        AccountsTemplates.linkClick(\"signIn\");\n    },\n};","AT.prototype.atSignupLinkHelpers = {\n    disabled: function() {\n        return AccountsTemplates.disabled();\n    },\n    signUpLink: function(){\n        return AccountsTemplates.getRoutePath(\"signUp\");\n    },\n    preText: function(){\n        return T9n.get(AccountsTemplates.texts.signUpLink_pre, markIfMissing=false);\n    },\n    linkText: function(){\n        return T9n.get(AccountsTemplates.texts.signUpLink_link, markIfMissing=false);\n    },\n    suffText: function(){\n        return T9n.get(AccountsTemplates.texts.signUpLink_suff, markIfMissing=false);\n    },\n};\n\nAT.prototype.atSignupLinkEvents = {\n    \"click #at-signUp\": function(event, t) {\n        event.preventDefault();\n        AccountsTemplates.linkClick('signUp');\n    },\n};","AT.prototype.atSocialHelpers = {\n    disabled: function() {\n        if (AccountsTemplates.disabled())\n            return \"disabled\";\n        var user = Meteor.user();\n        if (user){\n            var numServices = 0;\n            if (user.services)\n                numServices = _.keys(user.services).length; // including \"resume\"\n            if (numServices === 2 && user.services[this._id])\n                return \"disabled\";\n        }\n    },\n    name: function(){\n        return this._id;\n    },\n    iconClass: function() {\n        var ic = AccountsTemplates.texts.socialIcons[this._id];\n        if (!ic)\n            ic = \"fa fa-\" + this._id;\n        return ic;\n    },\n    buttonText: function() {\n        var service = this;\n        var serviceName = this._id;\n        if (serviceName === \"meteor-developer\")\n            serviceName = \"meteor\";\n        serviceName = capitalize(serviceName);\n        if (!service.configured)\n            return T9n.get(AccountsTemplates.texts.socialConfigure, markIfMissing=false) + \" \" + serviceName;\n        var showAddRemove = AccountsTemplates.options.showAddRemoveServices;\n        var user = Meteor.user();\n        if (user && showAddRemove){\n            if (user.services && user.services[this._id]){\n                var numServices = _.keys(user.services).length; // including \"resume\"\n                if (numServices === 2)\n                    return serviceName;\n                else\n                    return T9n.get(AccountsTemplates.texts.socialRemove, markIfMissing=false) + \" \" + serviceName;\n            } else\n                    return T9n.get(AccountsTemplates.texts.socialAdd, markIfMissing=false) + \" \" + serviceName;\n        }\n        var parentData = Template.parentData();\n        var state = (parentData && parentData.state) || AccountsTemplates.getState();\n        var prefix = state === \"signIn\" ?\n            T9n.get(AccountsTemplates.texts.socialSignIn, markIfMissing=false) :\n            T9n.get(AccountsTemplates.texts.socialSignUp, markIfMissing=false);\n        return prefix + \" \" + T9n.get(AccountsTemplates.texts.socialWith, markIfMissing=false) + \" \" + serviceName;\n    },\n};\n\nAT.prototype.atSocialEvents = {\n    \"click button\": function(event, t) {\n        event.preventDefault();\n        event.currentTarget.blur();\n        if (AccountsTemplates.disabled())\n            return;\n        var user = Meteor.user();\n        if (user && user.services && user.services[this._id]){\n            var numServices = _.keys(user.services).length; // including \"resume\"\n            if (numServices === 2)\n                return;\n            else{\n                AccountsTemplates.setDisabled(true);\n                Meteor.call(\"ATRemoveService\", this._id, function(error){\n                    AccountsTemplates.setDisabled(false);\n                });\n            }\n        } else {\n            AccountsTemplates.setDisabled(true);\n            var parentData = Template.parentData();\n            var state = (parentData && parentData.state) || AccountsTemplates.getState();\n            var serviceName = this._id;\n            var methodName;\n            if (serviceName === 'meteor-developer')\n                methodName = \"loginWithMeteorDeveloperAccount\";\n            else\n                methodName = \"loginWith\" + capitalize(serviceName);\n            var loginWithService = Meteor[methodName];\n            options = {\n                loginStyle: AccountsTemplates.options.socialLoginStyle,\n            };\n            if (Accounts.ui) {\n                if (Accounts.ui._options.requestPermissions[serviceName]) {\n                    options.requestPermissions = Accounts.ui._options.requestPermissions[serviceName];\n                }\n                if (Accounts.ui._options.requestOfflineToken[serviceName]) {\n                    options.requestOfflineToken = Accounts.ui._options.requestOfflineToken[serviceName];\n                }\n            }\n            loginWithService(options, function(err) {\n                AccountsTemplates.setDisabled(false);\n                if (err && err instanceof Accounts.LoginCancelledError) {\n                    // do nothing\n                }\n                else if (err && err instanceof ServiceConfiguration.ConfigError) {\n                    if (Accounts._loginButtonsSession)\n                        return Accounts._loginButtonsSession.configureService(serviceName);\n                }\n                else\n                    AccountsTemplates.submitCallback(err, state);\n            });\n        }\n    },\n};\n","AT.prototype.atTermsLinkHelpers = {\n    disabled: function() {\n        return AccountsTemplates.disabled();\n    },\n    text: function(){\n        return T9n.get(AccountsTemplates.texts.termsPreamble, markIfMissing=false);\n    },\n    privacyUrl: function(){\n        return AccountsTemplates.options.privacyUrl;\n    },\n    privacyLinkText: function(){\n        return T9n.get(AccountsTemplates.texts.termsPrivacy, markIfMissing=false);\n    },\n    showTermsAnd: function(){\n        return !!AccountsTemplates.options.privacyUrl && !!AccountsTemplates.options.termsUrl;\n    },\n    and: function(){\n        return T9n.get(AccountsTemplates.texts.termsAnd, markIfMissing=false);\n    },\n    termsUrl: function(){\n        return AccountsTemplates.options.termsUrl;\n    },\n    termsLinkText: function(){\n        return T9n.get(AccountsTemplates.texts.termsTerms, markIfMissing=false);\n    },\n};\n\nAT.prototype.atTermsLinkEvents = {\n    \"click a\": function(event) {\n        if (AccountsTemplates.disabled())\n            event.preventDefault();\n    },\n};","AT.prototype.atTitleHelpers = {\n  title: function() {\n    var parentData = Template.currentData();\n    var state = (parentData && parentData.state) || AccountsTemplates.getState();\n    return T9n.get(AccountsTemplates.texts.title[state], markIfMissing = false);\n  },\n};\n","AT.prototype.atMessageHelpers = {\n    message: function() {\n        var messageText = AccountsTemplates.state.form.get(\"message\");\n        if (messageText)\n            return T9n.get(messageText, markIfMissing=false);\n    },\n};","\nTemplate.__checkName(\"ensureSignedIn\");\nTemplate[\"ensureSignedIn\"] = new Template(\"Template.ensureSignedIn\", (function() {\n  var view = this;\n  return Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"signedIn\"));\n  }, function() {\n    return [ \"\\n    \", Blaze._TemplateWith(function() {\n      return {\n        template: Spacebars.call(view.lookup(\"template\"))\n      };\n    }, function() {\n      return Spacebars.include(function() {\n        return Spacebars.call(Template.__dynamic);\n      });\n    }), \"\\n  \" ];\n  }, function() {\n    return [ \"\\n    \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"auth\"));\n    }, function() {\n      return [ \"\\n      \", Blaze._TemplateWith(function() {\n        return {\n          template: Spacebars.call(view.lookup(\"auth\"))\n        };\n      }, function() {\n        return Spacebars.include(function() {\n          return Spacebars.call(Template.__dynamic);\n        });\n      }), \"\\n    \" ];\n    }, function() {\n      return [ \"\\n      \", Spacebars.include(view.lookupTemplate(\"fullPageAtForm\")), \"\\n    \" ];\n    }), \"\\n  \" ];\n  });\n}));\n","\nTemplate.ensureSignedIn.helpers({\n  signedIn: function () {\n    if (!Meteor.user()) {\n      AccountsTemplates.setState(AccountsTemplates.options.defaultState, function(){\n        var err = AccountsTemplates.texts.errors.mustBeLoggedIn;\n        AccountsTemplates.state.form.set('error', [err]);\n      });\n      return false;\n    } else {\n      AccountsTemplates.clearError();\n      return true;\n    }\n  }\n});\n","/* global\n  AccountsTemplates: false\n*/\n\"use strict\";\n\nMeteor.methods({\n  ATRemoveService: function(serviceName) {\n    check(serviceName, String);\n\n    var userId = this.userId;\n\n    if (userId) {\n      var user = Meteor.users.findOne(userId);\n      var numServices = _.keys(user.services).length; // including \"resume\"\n      var unset = {};\n\n      if (numServices === 2) {\n        throw new Meteor.Error(403, AccountsTemplates.texts.errors.cannotRemoveService, {});\n      }\n\n      unset[\"services.\" + serviceName] = \"\";\n      Meteor.users.update(userId, {$unset: unset});\n    }\n  },\n});\n"]}